import{N as z,I as U,J as l,t as m,O as v,l as Q,Q as H,H as b,A as D,K as u,G as S,L as B,S as k,E as O,U as P,V as Y,W as K,X as G,$ as E,a0 as V,s as X,Z as C,j as _,o as y,b as p,a1 as q,y as J,_ as w,a2 as Z,m as j,a3 as A,a4 as ee,k as te,a5 as se,a6 as ae,a7 as R,a8 as $,a9 as ie}from"./index-CLGmlMVg.js";import{c as ne,G as le,L as re}from"./tooltip-Ssw4NmQM-BZySqOUk.js";class rt extends u{declareProps(){this.class=""}render(){return l({class:this.class||""},this.children)}}const oe=t=>{const e=new Date(t,11,31),s=new Date(t,0,1);return e.getDay()===4||s.getDay()===4},ce=t=>{const e=new Date(t.valueOf()),s=(e.getDay()+6)%7;e.setDate(e.getDate()-s+3);const a=e.getFullYear(),i=new Date(a,0,4);i.setDate(i.getDate()-(i.getDay()+6)%7);const n=Math.ceil((e-i)/6048e5)+1;return n>52&&!oe(a)?{weekNumber:1,year:a+1}:{weekNumber:n,year:a}},de=(t,e,s)=>{if(s===0)return[];const a=new Date(t,e,0).getDate();return Array.from({length:s},(i,n)=>new Date(t,e-1,a-s+n+1))},he=(t,e,s)=>Array.from({length:s},(a,i)=>new Date(t,e+1,i+1)),W=(t,e)=>{const s=new Date(e,0,4),a=(s.getDay()+6)%7,i=new Date(s);i.setDate(s.getDate()-a);const n=new Date(i);return n.setDate(i.getDate()+(t-1)*7),n},ue=(t,e,s)=>{const a=new Date;return a.getDate()===t&&a.getMonth()===e&&a.getFullYear()===s},pe=({day:t,month:e,year:s,weekNumber:a,selectWeek:i})=>{const n=ue(t,e,s);return B({text:t||"",disabled:!t,class:`
			px-2 py-1 text-center rounded-md
			${n?"bg-accent text-accent-foreground":""}
			hover:bg-primary hover:text-primary-foreground
		`,click:()=>i(a,s)})},ge=(t,e)=>{const s=new Date(t,e,1).getDay(),a=new Date(t,e+1,0).getDate(),i=de(t,e,s),n=Array.from({length:a},(h,f)=>new Date(t,e,f+1)),r=(i.length+n.length)%7,g=r===0?0:7-r,o=he(t,e,g),c=[...i,...n,...o],d=[];for(let h=0;h<c.length;h+=7){const f=c.slice(h,h+7),x=f.find(M=>M)||new Date(t,e,1),{weekNumber:L,year:I}=ce(x);d.push({weekNumber:L,year:I,days:f})}return d},me=({selectWeek:t})=>P("month",(e,s,{data:a})=>{const{year:i,month:n,currentDate:r}=a,g=ge(i,n);return l({class:"grid grid-cols-8 gap-1 text-sm px-4 py-2"},[l({class:"text-xs text-center col-span-1 text-muted-foreground flex items-center"},"Week"),l({class:"grid grid-cols-7 col-span-7 text-center text-muted-foreground items-center"},["Su","Mo","Tu","We","Th","Fr","Sa"].map(o=>C({class:"px-1 py-1",text:o}))),...g.map(({weekNumber:o,days:c,year:d})=>l({class:"grid grid-cols-8 col-span-8 items-center ring-primary rounded-sm px-1",onSet:["currentWeek",{ring:o}]},[l({class:"font-medium text-center col-span-1 rounded-sm cursor-pointer",click:()=>t(o,d),onSet:["currentWeek",{"text-primary-foreground":o,"bg-primary":o}],text:o?`W${o}`:""}),l({class:"grid grid-cols-7 col-span-7 text-center"},c.map(h=>pe({year:(h==null?void 0:h.getFullYear())||null,month:(h==null?void 0:h.getMonth())||null,day:(h==null?void 0:h.getDate())||null,weekNumber:o,selectWeek:t})))]))])}),T=({label:t,click:e})=>p({class:`
			inline-flex items-center justify-center h-7 w-7 bg-transparent p-0
			opacity-50 hover:opacity-100 text-muted-foreground absolute
			${t==="Previous"?"left-1":"right-1"}
			focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2
		  `,click:e,"aria-label":`${t} month`,variant:"icon",icon:t==="Previous"?y.chevron.single.left:y.chevron.single.right}),fe=({next:t,previous:e})=>l({class:"flex flex-auto min-h-12 text-sm font-medium relative justify-center items-center"},[C("[[monthName]] [[year]]"),T({label:"Previous",click:e}),T({label:"Next",click:t})]);class ot extends u{declareProps(){this.selectedDate=null,this.selectedWeek=null,this.selectedCallBack=null}setData(){const e=new Date,s=this.selectedWeek||this.calculateCurrentWeek(e),a=W(s,e.getFullYear());return new v({monthName:this.getMonthName(a.getMonth()),year:a.getFullYear(),month:a.getMonth(),currentDate:a.getDate(),currentWeek:s})}getSelectedDate(e){const s=this.selectedDate?new Date(this.selectedDate):e;return new Date(s.getFullYear(),s.getMonth(),s.getDate())}calculateCurrentWeek(e){const s=new Date(e.valueOf()),a=(e.getDay()+6)%7;s.setDate(s.getDate()-a+3);const i=s.valueOf();return s.setMonth(0,1),s.getDay()!==4&&s.setMonth(0,1+(4-s.getDay()+7)%7),1+Math.ceil((i-s)/6048e5)}getMonthName(e){return A.monthNames[e]}goToPreviousMonth(){const e=this.data;let{year:s,month:a}=e;a===0?(a=11,s--):a--,this.setDate(a,s)}goToNextMonth(){const e=this.data;let{year:s,month:a}=e;a===11?(a=0,s++):a++,this.setDate(a,s)}setDate(e,s,a){this.data.set({year:s,month:e,monthName:this.getMonthName(e)}),a&&(this.data.currentDate=a)}selectWeek(e,s){this.data.currentWeek=e;const a=W(e,s);this.setDate(a.getMonth(),a.getFullYear(),a.getDate()),typeof this.selectedCallBack=="function"&&this.selectedCallBack(e)}render(){return l({class:"week-calendar-container border rounded-md bg-background p-3"},[fe({next:()=>this.goToNextMonth(),previous:()=>this.goToPreviousMonth()}),me({selectWeek:(e,s)=>this.selectWeek(e,s)})])}}const N=({label:t,click:e})=>p({class:`
			inline-flex items-center justify-center h-7 w-7 bg-transparent p-0
			opacity-50 hover:opacity-100 text-muted-foreground absolute
			${t==="Previous"?"left-1":"right-1"}
			focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2
		  `,click:e,"aria-label":`${t} month`,variant:"icon",icon:t==="Previous"?y.chevron.single.left:y.chevron.single.right}),xe=({onMonthClick:t,onYearClick:e,next:s,previous:a})=>l({class:"flex items-center justify-center space-x-2 relative min-h-12 text-sm font-medium"},[p({click:t,variant:"ghost","aria-label":"Select month"},"[[monthName]]"),p({click:e,variant:"ghost","aria-label":"Select year"},"[[current.year]]"),N({label:"Previous",click:a}),N({label:"Next",click:s})]),ye=t=>l({class:"py-1"},t),we=()=>l({class:"grid grid-cols-7 text-center text-sm font-medium text-muted-foreground mb-1"},["Su","Mo","Tu","We","Th","Fr","Sa"].map(ye)),be=({day:t,iso:e,disabled:s,isStart:a,isEnd:i,isBetween:n,click:r})=>p({class:"flex items-center justify-center h-9 p-0 text-sm rounded-md "+(a||i?"bg-primary text-primary-foreground":n?"bg-muted text-foreground":""),disabled:s,click:()=>!s&&r(e)},t.toString()),ke=({cells:t})=>l({class:"grid grid-cols-7 gap-1"},t.map(e=>be({day:e.day,iso:e.iso,disabled:e.disabled,isStart:e.isStart,isEnd:e.isEnd,isBetween:e.isBetween,click:e.click}))),ve=m((t,e)=>l({class:"fex flex-auto flex-col"},[xe({onMonthClick:t.onMonthClick,onYearClick:t.onYearClick,next:t.next,previous:t.previous}),l({class:"flex flex-auto flex-col w-full",onSet:["currentDate",()=>[we(),ke({cells:t.cells})]]})])),De=({currentMonth:t,currentYear:e,onSelect:s})=>l({class:"grid grid-cols-3 gap-2"},A.monthNames.map((a,i)=>p({click:n=>{n.preventDefault(),n.stopPropagation(),s(i)},variant:t===i?"primary":"ghost","aria-label":`Select ${a} ${e}`},a.substring(0,3)))),Se=({start:t,end:e,selecting:s,onSelectStart:a,onSelectEnd:i})=>l({class:"flex space-x-2 mb-3"},[p({click:a,variant:s==="start"?"primary":"ghost"},t?`Start: ${t}`:"Select start"),p({click:i,variant:s==="end"?"primary":"ghost"},e?`End: ${e}`:"Select end")]),Ce=({currentYear:t,onSelect:e})=>{const s=t-50,a=Array.from({length:101},(i,n)=>s+n);return l({class:"grid grid-cols-4 gap-2 overflow-y-auto max-h-72"},a.map(i=>p({click:n=>{n.preventDefault(),n.stopPropagation(),e(i)},variant:i===t?"primary":"ghost","aria-label":`Select ${i}`},i.toString())))};class ct extends u{declareProps(){this.startDate=null,this.endDate=null,this.onRangeSelect=null,this.blockPriorDates=!1}setData(){const e=new Date;return new v({today:{date:e.getDate(),month:e.getMonth(),year:e.getFullYear()},current:{date:e.getDate(),month:e.getMonth(),year:e.getFullYear()}})}setupStates(){return{view:"calendar",selecting:"start",start:this.startDate,end:this.endDate}}handleClick(e){this.state.selecting==="start"?(this.state.start=e,this.state.end=null,this.state.selecting="end"):(this.state.end=e,this.state.selecting="start",typeof this.onRangeSelect=="function"&&this.onRangeSelect(this.state.start,this.state.end))}setCurrent({month:e,year:s}){const a=this.data.current;a.month=(e+12)%12,a.year=s+(e<0?-1:e>11?1:0)}render(){const{today:e,current:s}=this.data,{start:a,end:i,selecting:n}=this.state,r=new Date(s.year,s.month,1).getDay(),g=new Date(s.year,s.month+1,0).getDate(),o=[];for(let c=0;c<r;c++)o.push(null);for(let c=1;c<=g;c++){const d=ee(s.year,s.month,c),h=new Date(d+"T00:00:00")<new Date(e.year,e.month,e.date),f=this.blockPriorDates&&h,x=a===d,L=i===d,I=a&&i&&d>a&&d<i;o.push({day:c,iso:d,disabled:f,isStart:x,isEnd:L,isBetween:I,click:M=>this.handleClick(M)})}return l({class:"range-calendar p-4 rounded-md border min-w-80"},[Se({start:a,end:i,selecting:n,onSelectStart:()=>this.state.selecting="start",onSelectEnd:()=>this.state.selecting="end"}),te("view",c=>{switch(c){case"months":return De({currentMonth:s.month,currentYear:s.year,onSelect:d=>{this.setCurrent({month:d,year:s.year}),this.state.view="calendar"}});case"years":return Ce({currentYear:s.year,onSelect:d=>{this.setCurrent({month:s.month,year:d}),this.state.view="calendar"}});default:return ve({onMonthClick:()=>this.state.view="months",onYearClick:()=>this.state.view="years",next:()=>this.setCurrent({month:s.month+1,year:s.year}),previous:()=>this.setCurrent({month:s.month-1,year:s.year}),cells:o})}})])}}const Le=(t,e)=>{const s=t.toggleAllSelectedRows();e.state.checked=!s},Ie=t=>E({class:`cursor-pointer py-3 px-4 text-base w-10 ${t.class||""}`},[X(e=>new re({class:"mr-2",onChange:(s,a)=>Le(e,a)}))]),Me=({align:t,sortable:e,key:s,label:a,sort:i,class:n})=>{const r=t||"justify-start";return E({class:`cursor-pointer py-3 px-4 text-base ${n||""}`,click:e&&(()=>i(s))},[l({class:`flex flex-auto w-full items-center ${r}`},[C(a),e&&_({class:"ml-2",html:y.arrows.upDown})])])},F=t=>K([V({class:"text-muted-foreground border-b",map:[t.headers,e=>e.label==="checkbox"?Ie({toggle:t.toggle}):Me({align:e.align,sortable:e.sortable,key:e.key,label:e.label,sort:t.sort})]})]),Be=({key:t,rows:e,selectRow:s,rowItem:a,emptyState:i})=>new G({cache:"list",key:t,items:e,rowItem:n=>a(n,s),class:"divide-y divide-border",emptyState:i});class Pe extends u{setData(){let e=this.rows&&this.rows.length>0;return(this.loadMoreItems||this.tableData)&&!e&&(e=null),new v({selectedRows:[],hasItems:e,selected:!1})}toggleAllSelectedRows(){const e=this.list.getRows(),s=this.data.selectedRows.length===e.length,a=s?[]:e;return this.data.selectedRows=a,this.updateSelected(),this.updateTable(!s),s}updateSelected(){const e=this.data.get("selectedRows");this.data.selected=e.length>0}getSelectedRows(){return this.data.get("selectedRows")}updateTable(e){const s=this.list.getRows();s.forEach(a=>a.selected=e),this.list.setRows(s)}selectRow(e){const s=e.selected??!1;e.selected=!s;const a=this.data.get("selectedRows"),i=e.selected?[...a,e]:a.filter(n=>n!==e);this.data.selectedRows=i,this.updateSelected()}render(){const e=this.rows,s=this.border!==!1?"border":"";return l({class:"w-full flex flex-auto flex-col"},[P("hasItems",a=>a===!1&&this.emptyState?this.emptyState():null),l({class:`w-full rounded-md ${s} overflow-x-auto`,onSet:["hasItems",{hidden:!1}]},[Y({class:"w-full"},[this.headers&&F({headers:this.headers,sort:a=>this.sortRows(a)}),this.customHeader??null,Be({key:this.key,rows:e,selectRow:this.selectRow.bind(this),rowItem:this.rowItem,emptyState:this.emptyState})])])])}remove(e){this.list.remove(e)}setRows(e){this.list.setRows(e)}append(e){this.list.append(e)}mingle(e,s=!1){this.list.mingle(e,s)}prepend(e){this.list.prepend(e)}beforeDestroy(){this.data.selectedRows=[]}}const Re=t=>new ie({cache:"list",scrollContainer:t.scrollContainer,loadMoreItems:t.loadMoreItems,offset:t.offset,limit:t.limit,key:t.key,tableData:t.tableData,items:t.items,rowItem:e=>t.rowItem(e,t.selectRow),class:"divide-y divide-border"});class $e extends Pe{render(){const e=this.rows,s=this.border!==!1?"border":"";return l({class:"w-full flex flex-auto flex-col"},[P("hasItems",a=>a===!1&&this.emptyState?this.emptyState():null),l({class:`w-full rounded-md ${s} overflow-x-auto`,onSet:["hasItems",{hidden:!1}]},[Y({class:"w-full"},[this.headers&&F({headers:this.headers,sort:a=>this.sortRows(a)}),this.customHeader??null,Re({scrollContainer:this.scrollContainer,loadMoreItems:this.loadMoreItems,offset:this.offset,limit:this.limit,class:this.class,tableData:this.tableData,key:this.key,items:e,selectRow:this.selectRow.bind(this),rowItem:this.rowItem})])])])}refresh(){this.list.refresh()}}const dt=m(t=>new $e({cache:t.cache??"list",tableData:t.data,scrollContainer:t.scrollContainer,loadMoreItems:t.loadMoreItems,offset:t.offset,limit:t.limit,class:t.class,key:t.key,rows:t.rows,rowItem:t.rowItem,headers:t.headers,customHeader:t.customHeader,border:t.border,emptyState:t.emptyState})),We=m(({name:t,email:e})=>l({class:"min-w-0 flex-auto"},[w({class:"text-base font-semibold leading-6 m-0"},t),w({class:"truncate text-sm leading-5 text-muted-foreground m-0"},e)])),Te=()=>l({class:"flex items-center gap-x-1.5"},[l({class:"flex-none rounded-full bg-emerald-500/20 p-1"},[l({class:"h-1.5 w-1.5 rounded-full bg-emerald-500"})]),w({class:"text-xs leading-5 text-gray-500"},"Online")]),Ne=t=>w({class:"text-xs leading-5 text-muted-foreground"},[C("Last seen "),Z({datetime:t},"3h ago")]),ze=(t,e)=>t==="online"?Te():Ne(e),Oe=m(({role:t,lastSeen:e,status:s})=>l({class:"hidden shrink-0 sm:flex sm:flex-col sm:items-end"},[w({class:"text-sm leading-6 m-0"},t),ze(s,e)])),Ye=t=>t.split(" ").map(e=>e[0]).join(""),Ee=m(t=>D({class:"fadeIn flex justify-between gap-x-6 py-4 px-4 rounded-md hover:bg-muted/50"},[l({class:"flex min-w-0 gap-x-4"},[J({src:t.image,alt:t.name,fallbackText:Ye(t.name)}),We({name:t.name,email:t.email})]),Oe({role:t.role,lastSeen:t.lastSeen,status:t.status})])),ht=m(t=>new q({cache:"list",key:"name",items:t.users,role:"list",class:"divide-y divide-border",rowItem:Ee})),je=(t,e)=>e.includes(t),Ae=(t,e,s)=>t.exact?s===e:je(e,s),Fe=({text:t,href:e,exact:s,hidden:a})=>new O({text:t,href:e,exact:s,dataSet:["selected",["state",!0,"active"]],class:`${a?"hidden":"inline-flex"} items-center justify-center whitespace-nowrap px-3 py-1.5 text-sm font-medium transition-all rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring focus-visible:ring-offset-background hover:bg-primary hover:text-primary-foreground disabled:opacity-50 disabled:pointer-events-none data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm`});class ut extends u{declareProps(){this.options=[],this.class=""}beforeSetup(){this.links=[]}render(){return S({class:`flex items-center justify-center p-2 text-muted-foreground rounded-md ${this.class||""}`},[b({class:"flex space-x-4",map:[this.options,e=>this.addLink(e)],watch:{value:["[[path]]",k.data],callBack:this.updateLinks.bind(this)}})])}afterSetup(){const e=k.data.path;this.updateLinks(e)}updateLinks(e){let s=!1;this.deactivateAllLinks();for(const a of this.links)a.rendered&&(Ae(a,a.getLinkPath(),e)?(this.updateLink(a,!0),s=!0):this.updateLink(a,!1));!s&&this.links[0]&&this.updateLink(this.links[0],!0)}deactivateAllLinks(){for(const e of this.links)this.updateLink(e,!1)}updateLink(e,s){e.update(s)}addLink({label:e,href:s,exact:a,hidden:i}){const n=Fe({text:e,href:s,exact:a,hidden:i});return this.links.push(n),n}beforeDestroy(){this.links=[]}}const pt=m(t=>{const e=t.margin||"m-4 ml-0";return t.allowHistory=t.allowHistory===!0,l({class:`flex-none ${e}`},[p({variant:"back",class:"ghost",...t})])});class Ue extends u{declareProps(){this.class=""}render(){return l({class:this.getClassName(),onSet:["loading",{loading:!0}]},[this.addBody()])}getClassName(){return"overlay absolute top-[0px] left-0 bottom-0 right-0 flex-col bg-background z-20 lg:z-10 flex flex-auto lg:left-[64px] lg:top-0 overflow-y-visible will-change-contents "+(this.class||"")}setContainer(e){this.container=app.root}setupStates(){return{loading:!1}}addLoading(){this.state.loading=!0}removeLoading(){this.state.loading=!1}addBody(){return l({class:"body fadeIn flex flex-auto flex-col"},this.getContents())}getContents(){return this.children}}z.addType("dockableOverlay",t=>{if(!t)return;const e=t.component;e&&e.rendered===!0&&e.state.docked===!1&&e.destroy()});class gt extends Ue{onCreated(){this.dockSize=this.maxSize||1024}render(){const e=this.container;return l({onState:[["loading",{loading:!0}],["docked",(s,a)=>{s?(a.className=this.getDockedClassName(),e.appendChild(a),document.documentElement.style.overflowY="auto"):(a.className=this.getClassName(),app.root.appendChild(a),document.documentElement.style.overflowY="hidden")}]]},[this.addBody()])}getDockedClassName(){return"flex flex-auto flex-col bg-background flex will-change-contents "+(this.class||"")}setup(e){this.container=e,this.initialize()}setupStates(){return{loading:!1,docked:this.canDock()}}afterSetup(){z.add(this.container,"dockableOverlay",{component:this}),this.onResize()}setupEvents(){return[["resize",globalThis,()=>this.onResize()]]}canDock(){return globalThis.innerWidth>=this.dockSize}onResize(){this.state.docked=this.canDock()}beforeDestroy(){document.documentElement.style.overflowY="auto"}}const Qe=m(({index:t,click:e,state:s},a)=>D({class:"p-2 cursor-pointer hover:bg-muted/50",onState:[[s,"selectedIndex",{"bg-accent":t,"text-white":t}]],click:()=>e(t)},a)),He=m(({selectOption:t,state:e})=>b({class:"border rounded-md list-none m-0 p-0 max-h-[400px] overflow-y-auto",for:["filteredOptions",(s,a)=>Qe({index:a,click:t,state:e},s.label)]})),Ke=m(t=>l({class:"relative flex items-center"},[ne({cache:"input",class:t.class??"",placeholder:t.placeholder??"Search...",bind:t.bind??[t.state,"searchQuery"],keyup:(e,s)=>{s.state&&(s.state.open=!1),typeof t.filterOptions=="function"&&t.filterOptions(),s.dropdown&&s.dropdown.updatePosition(),t.keyup&&t.keyup(e,s)},pointerup:(e,s)=>{typeof s.toggleDropdown=="function"&&s.toggleDropdown()},keydown:e=>[typeof t.handleKeyDown=="function"&&t.handleKeyDown(e)]}),t.icon&&l({class:"absolute flex right-0 mr-2"},[Q(t.icon)])])),Ge=t=>l({class:"relative flex fle-auto flex-col",onState:["open",(e,s,a)=>{if(e)return new H({cache:"dropdown",parent:a,button:a.input,size:"xl"},[He(t)])}]}),mt=U({setData(){const t=this.options||[];return new v({options:t,filteredOptions:t})},state(){return{searchQuery:"",selectedIndex:-1,open:!1}},setSelectedIndexByQuery(){const t=this.data.filteredOptions;let{searchQuery:e}=this.state;e=e.toLowerCase();const s=t.findIndex(a=>a.label.toLowerCase()===e);s>=0&&(this.state.selectedIndex=s)},filterOptions(){const t=this.state.searchQuery.toLowerCase();if(t===""||t.length===0){this.data.filteredOptions=this.data.options;return}const e=this.data.get("options");this.data.filteredOptions=e.filter(s=>s.label.toLowerCase().includes(t))},getValue(){const{selectedIndex:t}=this.state;return t<0?null:this.data.get(`filteredOptions[${t}]`)},selectOption(t){this.state.selectedIndex=t;const e=this.data.get(`filteredOptions[${t}]`);this.state.searchQuery=e.label,this.state.open=!1,typeof this.onSelect=="function"&&this.onSelect(e)},toggleDropdown(){this.state.toggle("open"),this.state.open&&this.setSelectedIndexByQuery()},handleKeyDown(t){const e=this.data.filteredOptions,{selectedIndex:s}=this.state;t.key==="ArrowDown"?(t.preventDefault(),this.state.selectedIndex=Math.min(s+1,e.length-1)):t.key==="ArrowUp"?(t.preventDefault(),this.state.selectedIndex=Math.max(s-1,0)):t.key==="Enter"&&s>=0&&(t.preventDefault(),this.selectOption(s))},render(){return l({class:"relative w-full max-w-md"},[Ke({state:this.state,icon:this.icon,placeholder:this.placeholder,filterOptions:this.filterOptions.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}),Ge({state:this.state,setSelected:this.setSelectedIndexByQuery.bind(this),selectOption:this.selectOption.bind(this)})])}}),Ve=t=>D({class:"inline-flex flex-auto items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm",dataSet:["selected",["state",t.value,"active"]]},[B({class:"flex flex-auto justify-center items-center px-3 py-1.5 rounded-md",onSet:["selected",{selected:t.value}],click:e=>t.callBack(t.value)},t.label)]),Xe=(t,e)=>(t.callBack=e,Ve(t)),_e=t=>S({class:`tab items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${t.class}`},[b({class:"flex flex-auto flex-row",map:[t.options,e=>Xe(e,t.callBack)]})]);class ft extends u{declareProps(){this.options=[],this.class="",this.callBack=null}render(){const e=this.select.bind(this);return l({class:""},[_e({class:this.class,options:this.options,callBack:e}),j({class:"tab-content",onState:["selected",this.updateContent.bind(this)]})])}getFirstValue(){var e;return(e=this.options[0])==null?void 0:e.value}update(){const e=this.state.get("selected");this.select(null),this.select(e)}select(e){this.state.selected=e}updateContent(e){const s=this.options;if(!s||s.length<1)return;const a=s[0];for(const i of s)if(i.value===e)return i.layout;return a.layout}setupStates(){const e=this.callBack,s=typeof e;return{selected:{state:this.getFirstValue(),callBack(a){s==="function"&&e(a)}}}}}const qe=t=>D({class:"inline-flex flex-auto items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm",dataSet:["selected",["state",t.value,"active"]]},[B({class:"flex flex-auto justify-center items-center px-3 py-1.5 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",onSet:["selected",{selected:t.value}],click:e=>t.callBack(t.value),disabled:t.disabled},t.label)]),Je=(t,e)=>(t.callBack=e,qe(t)),Ze=t=>S({class:`tab items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${t.class}`},[b({class:"flex flex-auto flex-row",map:[t.options,e=>Je(e,t.callBack)]})]);class xt extends u{declareProps(){this.options=[],this.class="",this.onSelect=null}render(){const e=this.select.bind(this);return Ze({class:this.class,options:this.options,callBack:e})}select(e){this.state.selected=e,typeof this.onSelect=="function"&&this.onSelect(e,this.parent)}setupStates(){var e;return{selected:((e=this.options[0])==null?void 0:e.value)||null}}}const et=(t,e)=>new RegExp(`${t}($|/|\\.).*`).test(e),tt=(t,e)=>{const s=t.getLinkPath();return t.exact?e===s:et(s,e)},st=({text:t,href:e,exact:s})=>new O({text:t,href:e,exact:s,dataSet:["selected",["state",!0,"active"]],class:"inline-flex flex-auto items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-sm"});class at extends u{declareProps(){this.options=[],this.class="",this.onSelect=null}beforeSetup(){this.links=[]}render(){return S({class:`tab items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${this.class}`},[b({class:"flex flex-auto flex-row",map:[this.options,e=>this.addLink(e)],watch:{value:["[[path]]",k.data],callBack:this.updateLinks.bind(this)}})])}afterSetup(){const e=k.data.path;this.updateLinks(e)}updateLinks(e){let s=!1,a=this.links[0];this.deactivateAllLinks();for(const i of this.links)if(i.rendered!==!1&&(s=tt(i,e),s===!0)){this.updateLink(i,!0);break}s!==!0&&a&&this.updateLink(a,!0)}deactivateAllLinks(){for(const e of this.links)this.updateLink(e,!1)}updateLink(e,s){e.update(s)}addLink({label:e,href:s,exact:a}){const i=st({text:e,href:s,exact:a});return this.links.push(i),i}beforeDestroy(){this.links=[]}}class yt extends u{declareProps(){this.options=[],this.class=""}render(){return l({class:"tab-panel"},[new at({class:this.class,options:this.options}),j({class:"tab-content",switch:this.addGroup()})])}addGroup(){let e;const s=[],a=this.options;for(let i=0,n=a.length;i<n;i++)e=a[i],s.push({uri:e.uri||e.href,component:e.component,title:e.title||null,persist:!0});return s}}class it extends u{onCreated(){this.lineWidth=this.lineWidth||3,this.lineColor=this.lineColor||"#000000",this.canvas=null,this.ctx=null,this.status="stopped";const e=1e3/60;this.timer=new se(e,this.draw.bind(this)),this.width=0,this.height=0,this.signed=!1,this.mouse={x:0,y:0,status:"up"},this.margin=this.margin||{x:40,y:60},this.targetSize=this.targetSize||{width:740,height:345},this.baseLineWidth=this.baseLineWidth||2,this.baseStrokeColor=this.baseStrokeColor||"#000000"}render(){return ae({style:"touch-action: none; -webkit-user-select: none; -webkit-touch-callout: none;"})}beforeDestroy(){this.stopTimer()}afterSetup(){this.canvas=this.panel,this.ctx=this.canvas.getContext("2d"),globalThis.setTimeout(()=>{this.resize(),this.draw()},1)}setupEvents(){const e=this.panel,s=this.pointerPosition.bind(this),a=this.pointerUp.bind(this),i=this.pointerDown.bind(this),n=this.resize.bind(this),r={passive:!1};return[["pointermove",e,s,r],["pointerup",e,a],["pointerdown",e,i,r],["pointerout",e,a],["resize",globalThis,n]]}getEventPosition(e){let s,a;const i=this.canvas,n=i.width/parseInt(i.style.width),r=i.getBoundingClientRect();if(e.touches&&e.touches.length){const c=e.touches[0];s=c.clientX,a=c.clientY}else s=e.x||e.clientX,a=e.y||e.clientY;const g=parseInt((s-r.left)*n),o=parseInt((a-r.top)*n);this.mouse.x=g,this.mouse.y=o}pointerDown(e){e.preventDefault(),e.stopPropagation(),this.getEventPosition(e);const{ctx:s,mouse:a}=this;s.beginPath(),s.moveTo(a.x,a.y),a.status="down",this.startTimer()}pointerUp(e){e.preventDefault(),e.stopPropagation(),this.ctx.closePath(),this.mouse.status="up",this.stopTimer()}pointerPosition(e){this.getEventPosition(e),this.mouse.status==="down"&&(e.preventDefault(),e.stopPropagation())}resize(){const{canvas:e,ctx:s}=this,a=e.toDataURL();if(this.scale(),this.setupBackground(s),a!=="data:,"){const i=new globalThis.Image;R.on("load",i,function n(){s.drawImage(i,0,0),R.off("load",i,n)}),i.src=a}this.draw()}getImage(){return this.canvas.toDataURL("image/jpeg",.7)}noScaleResize(){const e=$.getSize(container);this.width=canvas.width=e.width,this.height=canvas.height=e.height}scale(){const e=this.canvas,s=this.container,a=$.getSize(s),i=this.targetSize,n=i.width,r=i.height;let g=n+"px",o=r+"px";if(this.width=e.width=n,this.height=e.height=r,a.width!==0&&a.height!==0){const c=a.width,d=a.height,h=c/n,f=d/r,x=Math.min(h,f);g=n*x+"px",o=r*x+"px"}e.style.width=g,e.style.height=o}draw(){this.mouse.status==="down"&&this.addLine(this.ctx,this.mouse.x,this.mouse.y,this.lineColor)}drawBottomLine(e){const s=this.canvas;e.globalAlpha=1,e.shadowBlur=0;const a=this.margin.x,i=this.height-this.margin.y;e.beginPath(),e.moveTo(a,i),e.lineTo(s.width-this.margin.x,i),e.lineWidth=this.baseLineWidth,e.strokeStyle=this.baseStrokeColor,e.stroke(),e.closePath()}addLine(e,s,a,i){this.signed||(this.signed=!0);const n=Math.round(s),r=Math.round(a);e.lineWidth=this.lineWidth,e.strokeStyle=i,e.lineTo(n,r),e.stroke()}reset(){this.signed=!1;const{ctx:e}=this;e.clearRect(0,0,this.width,this.height),this.setupBackground(e)}setupBackground(e){e.fillStyle="transparent",e.fillRect(0,0,this.width,this.height),this.drawBottomLine(e)}startTimer(){this.stopTimer(),this.draw(),this.timer.start(),this.status="started"}stopTimer(){this.timer.stop(),this.status="stopped"}}class wt extends u{declareProps(){this.data=null,this.lineColor=null,this.lineWidth=null,this.baseLineWidth=null,this.baseStrokeColor=null,this.margin=null,this.targetSize=null,this.callBackData=null,this.pointerUp=null,this.path=null,this.canvasLayer=null}render(){return l({class:"signature-panel relative flex flex-auto overflow-hidden select-none"},[le({cache:"hiddenInput",required:!0,bind:this.path+".data"}),l({class:"absolute top-2 right-2"},[p({variant:"icon",icon:y.circleX,click:this.reset.bind(this)})]),new it({cache:"canvasLayer",margin:this.margin,targetSize:this.targetSize,lineColor:this.lineColor,lineWidth:this.lineWidth,baseLineWidth:this.baseLineWidth,baseStrokeColor:this.baseStrokeColor,pointerUpCallBack:this.pointerUp,callBackData:this.callBackData})])}afterSetup(){this.canvasLayer.resize()}getImage(){return this.canvasLayer.getImage()}isSigned(){return this.canvasLayer?this.canvasLayer.signed:!1}reset(e){if(this.canvasLayer)return this.canvasLayer.reset()}}export{ft as B,pt as C,ht as D,Ue as E,gt as I,xt as M,Me as P,Ie as R,ut as S,mt as T,Pe as U,Ke as _,yt as a,ot as b,wt as c,Ee as d,at as l,rt as p,dt as v,ct as x};
