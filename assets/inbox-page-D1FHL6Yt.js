import{I as m,n as t,Q as T,k as d,o,f as b,s as x,r as h,T as S,b as r,an as w,ao as j,ab as I,ad as y,S as v,d as L,U as M,c as E,a9 as D,O as A,N as C,a1 as R,R as B,M as U}from"./index-BLTdTdVM.js";import{S as O}from"./sidebar-menu-page-UmKsAvjb-82NM_HaP.js";import{D as P,S as $,g as N,B as z}from"./signature-panel-0XY9I1Hx-DbY_EdvN.js";import{D as k,V as l}from"./tooltip-PupzYM1r-D1fgKdhN.js";import"./mobile-nav-wrapper-CWqhZ0qz-MHjxwf5B.js";const u=[{id:1,name:"William Smith",subject:"Meeting Tomorrow",tags:["meeting","work","important"],time:"2024-11-04T18:00:00",content:"Hi, let's have a meeting tomorrow to discuss the project. I've been reviewing the project details...",read:!1},{id:2,name:"Alice Smith",subject:"Re: Project Update",tags:["work","important"],time:"2024-11-04T18:00:00",content:"Thank you for the project update. It looks great! I've gone through the report, and the progress...",read:!1},{id:3,name:"Bob Johnson",subject:"Weekend Plans",tags:["personal"],time:"2024-11-04T18:00:00",content:"Any plans for the weekend? I was thinking of going hiking in the nearby mountains...",read:!0},{id:4,name:"Emily Davis",subject:"Re: Question about Budget",tags:["work","budget"],time:"2024-11-04T18:00:00",content:"I have a question about the budget for the upcoming project. It seems like there's a discrepancy in...",read:!0},{id:5,name:"Michael Wilson",subject:"Important Announcement",tags:["meeting","work","important"],time:"2024-11-04T18:00:00",content:"I have an important announcement to make during our team meeting...",read:!0},{id:6,name:"Sophia White",subject:"Team Dinner",tags:["meeting","work"],time:"2024-11-04T18:00:00",content:"Let's have a team dinner next week to celebrate our success...",read:!0},{id:7,name:"James Martin",subject:"Re: Conference Registration",tags:["work","conference"],time:"2024-11-04T18:00:00",content:"I've completed the registration for the conference next month...",read:!0},{id:8,name:"Olivia Wilson",subject:"Vacation Plans",tags:["personal"],time:"2024-11-04T18:00:00",content:"Let's plan our vacation for next month. What do you think? I've been thinking of visiting...",read:!0}],W=(e,s)=>e>s?!0:null,H=()=>t({class:"text-xs text-muted-foreground"},"[[charCount]]/[[charLimit]]"),Y=()=>t({class:"flex justify-between items-center mt-3"},[d({variant:"icon",click:()=>console.log("Send email"),icon:o.airplane,class:"text-foreground hover:text-accent"})]),J=m({state(){return{charCount:0,charLimit:this.charLimit??5e3,isOverLimit:!1}},render(){const e=this.state.charLimit,s=n=>{const a=n.target.value,i=this.state;i.charCount=a.length,i.isOverLimit=W(a.length,e)};return t({class:"fadeIn pt-4"},[t({class:"relative flex border rounded-lg p-3 bg-surface"},[T({class:"w-full border-none bg-transparent resize-none focus:outline-none focus:ring-0 text-sm text-foreground placeholder-muted-foreground",placeholder:this.placeholder,input:s,bind:this.bind}),t({class:"flex flex-col items-end justify-end"},[H(),Y()])])])}}),g=()=>t({class:"m-4 mt-0 p-4 rounded-md items-center justify-center text-center"},[t({class:"flex-none max-w-12 mx-auto mt-8 mb-4"},[x({size:"xl"},o.envelope.open)]),b({class:"text-xl font-semibold text-muted-foreground text-center"},"Nothing to see here."),t({class:"flex flex-auto flex-col items-center justify-center"},[h("This view is empty. Click on a message is the list to view it or get started by creating a new message.")]),d({variant:"withIcon",class:"my-8 outline",icon:o.circlePlus},"Create a Message")]),Q=e=>r({class:"ml-auto text-xs text-foreground"},[w({dateTime:e})]),_=e=>t({class:"flex items-center justify-between pb-4 gap-4"},[t({class:"flex items-center gap-4"},[S({src:null,alt:e.name,fallbackText:`${e.name}`,size:"md"}),t({class:"flex flex-col"},[r({class:"font-semibold text-lg text-foreground"},e.name),r({class:"text-sm text-muted-foreground"},`Reply-To: ${e.replyTo||"No Reply-To Available"}`)])]),t({class:"text-xs text-muted-foreground"},[Q(e.time)])]),c=e=>k({content:e.content,position:e.position},[d({variant:"icon",icon:e.icon,click:e.click})]),F=e=>t({class:"flex items-center justify-between border-b pb-2"},[t({class:"flex lg:hidden"},[P({margin:"m-0 ml-0",backUrl:"/inbox",allowHistory:!0})]),t({class:"hidden lg:flex items-center gap-2"},[c({content:"Move to inbox",position:"bottom-right",icon:o.archive.box.default,click:()=>{}}),c({content:"Move to junk",position:"bottom",icon:o.archive.box.x,click:()=>{}}),c({content:"Delete",position:"bottom",icon:o.trash,click:(s,n)=>{new j({icon:o.trash,title:"Delete Message",description:"Are you sure you want to delete this message?",confirmTextLabel:"Delete",confirmed:()=>{e.delete(e.message.id)}}).open()}}),c({content:"Snooze",position:"bottom",icon:o.clock,click:()=>{}})]),t({class:"hidden lg:flex items-center gap-2"},[c({content:"Reply",position:"bottom",icon:o.arrows.left,click:()=>{}}),c({content:"Reply all",position:"bottom",icon:o.arrows.uturn.left,click:()=>{}}),c({content:"Forward",position:"bottom",icon:o.arrows.right,click:()=>{}}),t({class:"w-px h-5 bg-border mx-2"}),c({content:"More options",position:"bottom-left",icon:o.ellipsis.vertical,click:()=>{}})])]),V=()=>t({class:"flex flex-col gap-4 p-4"},[t({class:"hidden lg:flex items-center justify-between border-b pb-4"},[t({class:"flex items-center gap-4"},[l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"})]),t({class:"flex items-center gap-4"},[l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"}),l({width:"w-8",height:"h-8"})])]),t({class:"flex lg:hidden items-center justify-between border-b pb-4"},[t({class:"flex items-center gap-4"},[l({width:"w-8",height:"h-8"})])]),t({class:"flex items-center gap-4"},[l({width:"w-12",height:"h-12",shape:"circle"}),t({class:"flex flex-col gap-2 flex-1"},[l({width:"w-1/2",height:"h-6",class:"rounded"}),l({width:"w-1/3",height:"h-4",class:"rounded"})])]),l({width:"w-full",height:"h-40",class:"rounded"})]),q=e=>u.find(s=>s.id.toString()===e)||null,G=m({state:{loaded:!1},render(){const e=q(this.messageId);return setTimeout(()=>this.state.loaded=!0,500),t({class:"w-full flex flex-auto flex-col gap-y-4",onState:["loaded",n=>e?n?t({class:"flex flex-auto flex-col gap-y-4 max-h-screen p-4"},[F({message:e,delete:this.delete}),_(e),t({class:"flex flex-auto flex-col overflow-y-auto"},[I({class:"text-sm text-foreground mt-2 pb-40 whitespace-pre-line font-sans"},e.content)]),new J({placeholder:`Reply to ${e.name}...`})]):V():g()]})}}),X=e=>(()=>new $([y("messageId",s=>s?new G({messageId:s,delete:e.delete}):g())])),K=()=>new N([t({class:"hidden lg:flex flex-auto flex-col"},[t({class:"flex auto flex-col w-full h-full"},[g()])])]),Z=e=>t({class:"flex-4 flex-col w-full h-full hidden lg:flex justify-center",switch:[{uri:"inbox/:page/:messageId*",component:X(e)},{uri:"inbox*",component:K}]}),ee=[{label:"Inbox",count:8,icon:o.inbox.default,href:"inbox/inbox"},{label:"Drafts",count:0,icon:o.document.default,href:"inbox/drafts"},{label:"Sent",count:0,icon:o.envelope.open,href:"inbox/sent"},{label:"Junk",count:0,icon:o.archive.box.x,href:"inbox/junk"},{label:"Trash",count:0,icon:o.trash,href:"inbox/trash"},{label:"Archive",count:0,icon:o.archive.box.default,href:"inbox/archive"}],te=[{label:"Social",count:0,icon:o.user.group,href:"inbox/social"},{label:"Updates",count:0,icon:o.bell.alert,href:"inbox/updates"},{label:"Forums",count:0,icon:o.chat.text,href:"inbox/forums"},{label:"Shopping",count:0,icon:o.shoppingBag,href:"inbox/shopping"}],p=({label:e,count:s,icon:n,href:a})=>new M({class:"flex items-center justify-between p-2 rounded-md hover:bg-muted transition",activeClass:"bg-muted",href:a,exact:!1},[t({class:"flex items-center gap-x-2"},[n&&x({class:"w-5 h-5"},n),r({class:"text-sm font-medium text-foreground"},e)]),r({class:"text-xs text-muted-foreground"},s.toString())]),se=()=>t({class:"flex-auto flex-col pb-12 hidden lg:flex p-6 border-r bg-sidebar max-w-[270px] h-full"},[v({class:"pb-4 px-2 flex flex-col"},[L({class:"scroll-m-20 text-2xl font-bold tracking-tight"},"Messages")]),t({class:"flex flex-auto flex-col divide-y divide-border"},[t({class:"flex flex-col gap-y-2 pb-4",map:[ee,p]}),t({class:"flex flex-col gap-y-2 pt-4",map:[te,p]})])]),oe=()=>t({class:"flex flex-col flex-auto w-full rounded-md gap-y-3"},[l({width:"w-3/4",height:"h-6",class:"rounded"}),l({width:"w-1/2",height:"h-5",class:"rounded"}),l({width:"w-full",height:"h-8",class:"rounded"}),t({class:"flex gap-x-2 mt-0 pb-[1.5px]"},[l({width:"w-12",height:"h-5",class:"rounded"}),l({width:"w-14",height:"h-5",class:"rounded"})])]),ne=e=>r({class:"ml-auto text-xs text-foreground"},[w({dateTime:e})]),le=()=>r({class:"w-2 h-2 bg-blue-500 rounded-full",ariaLabel:"Unread message indicator"}),ae=e=>r({class:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80"},e),ie=m({state:{loaded:!1},markRead(){let{message:e}=this;e={...e},e.read||(e.read=!0,this.parent.mingle([e]))},render(){const e=this.message,s=this.parent.parent.route;return setTimeout(()=>this.state.loaded=!0,500),t({class:"flex flex-auto flex-col items-start gap-2 rounded-lg border p-3 text-left text-sm transition-all hover:bg-muted/50",onSet:[s,"messageId",{"bg-muted/50":e.id.toString()}],onState:["loaded",a=>a?E({class:"flex flex-auto flex-col w-full gap-2",href:`inbox/${s.page}/${e.id}`,click:()=>this.markRead()},[t({class:"flex w-full flex-col gap-1"},[t({class:"flex items-center justify-between"},[t({class:"flex items-center gap-2"},[r({class:"font-semibold text-base text-foreground"},e.name),!e.read&&le()]),ne(e.time)]),t({class:"text-sm font-medium text-muted-foreground"},e.subject)]),h({class:"line-clamp-2 text-sm text-muted-foreground"},e.content),t({class:"flex flex-wrap gap-2 mt-2",map:[e.tags,ae]})]):oe()]})}}),re=({list:e})=>t({class:"m-4 mt-8 p-4 border rounded-md items-center justify-center text-center"},[t({class:"flex-none max-w-12 mx-auto mt-8 mb-4"},[x({size:"xl"},o.inbox.default)]),b({class:"text-xl font-semibold text-muted-foreground text-center"},"I've checked but found nothing."),t({class:"flex flex-auto flex-col items-center justify-center"},[h("Let's get this thread started. Create a message to begin.")]),d({variant:"outline",class:"my-8"},"Create a Message")]),ce=()=>D({class:"pl-2 lg:pl-0 text-3xl lg:text-xl font-bold",useParent:({route:e})=>r({class:"capitalize",text:["[[page]]",e]})}),de=()=>t({class:"flex mr-2"},[k({content:"Add Message",position:"left"},[d({variant:"icon",icon:o.circlePlus})])]),ue=()=>v({class:"px-4 pb-2 sm:py-2 lg:p-4"},[t({class:"flex justify-between"},[ce(),t({class:"flex"},[de(),new z({options:[{label:"All Mail",value:"all"},{label:"Unread",value:"unread"}],onSelect:(e,{state:s})=>s.list=e})])])]),f=(e,s)=>s==="unread"?e.filter(n=>!n.read):e,fe=()=>t({class:"w-full pt-0 lg:pt-2 flex flex-auto flex-col gap-y-2 lg:overflow-y-auto lg:max-h-screen"},[ue(),t([y("page",(e,s,{data:n,state:a})=>{e||(e="inbox",app.navigate("inbox/inbox",null,!0));let i=u;e!=="inbox"&&(i=[]),i=f(i,a.list),n.items=i}),A("list",(e,s,{route:n,data:a})=>{let i=u;n.page!=="inbox"&&(i=[]),i=f(i,e),a.items=i}),C("items",(e,s,{state:n})=>(e=f(e,n.list),e.length?new R({cache:"list",key:"id",items:e,role:"list",class:"flex flex-col gap-y-2 px-4 pb-4",rowItem:a=>new ie({message:a})}):re({list:n.list})))])]),be=()=>{const e={setData(){return new U({items:u})},afterSetup(){this.route.page||app.navigate("inbox/inbox",null,!0)},setupStates(){return{list:"all"}}};return new O(e,[t({class:"flex w-full flex-col lg:flex-row h-full"},[se(),t({class:"flex flex-2 lg:max-w-[550px] lg:border-r"},[fe()]),B(s=>Z({delete:n=>{s.list.delete(n),app.navigate(`inbox/${s.route.page}`),app.notify({type:"success",title:"Email Deleted",description:"The email has been deleted.",icon:o.check})}}))])])};export{be as InboxPage,be as default};
