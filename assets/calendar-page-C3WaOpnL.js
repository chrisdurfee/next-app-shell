import{J as N,Y as o,G as $,z as m,l as S,a as _,w as x,a2 as A,o as D,S as Y,ad as k,h as O,q as F,P}from"./index-C1uRHk88.js";const c=t=>(t*=1,t<10?`0${t}`:String(t)),X=t=>(t.indexOf("T")===-1&&t.indexOf(" ")===-1&&(t+="T00:00:01"),t.replace(" ","T"),t),b=t=>t.replace(/-/g,"_"),h=(t,e,n)=>`${t}-${c(e+1)}-${c(n)}`,H=()=>Math.floor(Math.random()*28)+1,V=(t,e)=>{const n=[];for(let a=0;a<6;a++)n.push(`_${e}_${c(t+1)}_${c(H())}`);return n},y=(t,e)=>{const n=V(Number(t),Number(e)),s={};return n.forEach((a,l)=>{s[a]=s[a]??[];const u=Math.floor(Math.random()*5)+1;for(let d=0;d<u;d++)s[a].push(`Event ${l+1}.${d+1}`)}),s},W=t=>t?"bg-accent text-primary":"",j=t=>t?"text-muted-foreground opacity-50":"",z=(t,e)=>t===e,G=(t,e)=>z(t,e)?"bg-primary text-primary-foreground":"",R=(t,e,n,s)=>{const a=G(e,s);if(a)return a;const l=W(t);if(t)return l;const u=j(n);return n?u:"text-foreground"},q=t=>m({class:"bg-primary w-1 h-1 rounded-full m-[2px]"}),I=(t,e)=>e===3?m({class:"px-1 border rounded-md text-sm text-muted-foreground bg-secondary"},"..."):e>3?null:m({class:"px-1 border rounded-md text-sm text-muted-foreground bg-secondary"},t),M=({day:t,currentDate:e,date:n,isToday:s,isOutsideMonth:a,select:l})=>N({href:"/calendar/month/"+n,class:`
        flex flex-auto flex-col p-2 rounded-md
        hover:bg-muted/50 focus:z-10 items-center lg:items-start
      `,disabled:t===null,"aria-label":t?`Day ${t}`:null,click:()=>l(n)},[o({class:"flex items-center justify-center w-full"},[$({class:`p-2 rounded-lg text-sm font-medium ${R(s,e,a,n)}`},String(t))]),o({class:"flex lg:hidden flex-auto flex-row flex-wrap",for:[`events._${b(n)}`,q]}),o({class:"hidden lg:flex flex-auto flex-col space-y-1",for:[`events._${b(n)}`,I]})]),p=(t,e,n,s)=>t===s.date&&e===s.month&&n===s.year,J=(t,e,n)=>{const{year:s,month:a}=t,l=h(s,a,t.date),u=new Date(s,a,1).getDay(),d=new Date(s,a+1,0).getDate(),g=new Date(s,a,0).getDate(),i=[],v=a===0?11:a-1,C=a===0?s-1:s;for(let r=u-1;r>=0;r--){const f=p(g-r,v,C,e);i.push(M({day:g-r,currentDate:l,date:h(C,v,g-r),isToday:f,isOutsideMonth:!0,select:n}))}for(let r=1;r<=d;r++){const f=p(r,a,s,e);i.push(M({day:r,currentDate:l,date:h(s,a,r),isToday:f,isOutsideMonth:!1,select:n}))}const w=a===11?0:a+1,T=a===11?s+1:s,E=(7-i.length%7)%7;for(let r=1;r<=E;r++){const f=p(r,w,T,e);i.push(M({day:r,currentDate:l,date:h(T,w,r),isToday:f,isOutsideMonth:!0,select:n}))}return i},B=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>$({class:"text-center font-semibold text-muted-foreground py-1 m-0 mb-2 text-xs"},e)),K=t=>o({class:"flex flex-auto flex-col w-full",onSet:["currentDate",()=>[o({class:"flex flex-col lg:border-b"},[o({class:"grid grid-cols-7"},B())]),o({class:"grid grid-cols-7 h-full"},J(t.current,t.today,t.select))]]}),L=t=>o({class:"justify-between flex items-center mb-4"},[S({class:"inline-flex items-end"},[_({class:"scroll-m-20 text-3xl font-bold tracking-tight md:pl-4"},"[[monthName]]"),m({class:"text-muted-foreground text-base ml-2 font-bold"},"[[current.year]]")]),o({class:"flex items-center space-x-2"},[x({variant:"icon",icon:D.chevron.single.left,click:t.previous}),x({variant:"icon",icon:D.chevron.single.right,click:t.next}),A({content:"Add Event",position:"left"},x({variant:"icon",class:"lg:mr-4",icon:D.circlePlus}))])]),Q=t=>o({class:"flex flex-auto flex-col w-full space-y-1"},[L(t),K({current:t.current,today:t.today,select:t.select})]),tt=()=>new Y({getSelectedDate(t){const e=this.selectedDate?new Date(X(this.selectedDate)):t;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},setData(){const t=new Date,e=this.getSelectedDate(t),n=e.getMonth(),s=e.getFullYear(),a=y(n,s);return new P({events:a,monthName:this.getMonthName(n),currentDate:`${s}-${n+1}-${e.getDate()}`,current:{date:e.getDate(),year:s,month:n},today:{date:t.getDate(),month:t.getMonth(),year:t.getFullYear()}})},getMonthName(t){return F.getMonthName(t)},goToPreviousMonth(){const t=this.data;let e=t.current.month,n=t.current.year;e===0?(e=11,n--):e--,this.setCurrentDate(e,n),this.data.events=y(e,n)},goToNextMonth(){const t=this.data;let e=t.current.month,n=t.current.year;e===11?(e=0,n++):e++,this.setCurrentDate(e,n),this.data.events=y(e,n)},setCurrentDate(t,e,n=null){const s=this.data;s.current.month=t,s.current.year=e,typeof n=="number"&&(s.current.date=c(n)),s.currentDate=`${e}-${c(t+1)}-${s.current.date}`,s.monthName=this.getMonthName(t)},selectDate(t){const e=new Date(t+"T00:00:00");this.setCurrentDate(e.getMonth(),e.getFullYear(),e.getDate()),typeof this.selectedCallBack=="function"&&this.selectedCallBack(this.data.currentDate)},update(){const t=this.route;t.date&&this.selectDate(t.date)},render(){return k([o({class:"px-4 flex flex-auto flex-col pt-[80px] md:pt-5 md:px-0"},[o({class:"flex flex-auto flex-col w-full h-full"},[O("view",t=>{switch(t){case"month":return Q({current:this.data.current,today:this.data.today,select:e=>this.selectDate(e),next:()=>this.goToNextMonth(),previous:()=>this.goToPreviousMonth()});default:return null}})])])])}});export{tt as CalendarPage,tt as default};
