import{Y as t,z as l,b as n,o as r,d as u,a3 as f,v as c,H as g}from"./index-DgEcJouC.js";const d=({name:e,isMuted:s,isMainParticipant:a=!1})=>t({class:`relative rounded-lg overflow-hidden border ${a?"w-full h-full":"w-full h-32"}`},[t({class:"w-full h-full"}),t({class:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/50 to-transparent"},[t({class:"flex items-center justify-between"},[l({class:"text-sm font-medium"},e),s&&l({class:"flex items-center"},[n({size:"xs"},r.microphone)])])])]),m=({title:e,participantCount:s})=>t({class:"p-4 pt-6 pb-0 flex items-center justify-between"},[t({class:"flex items-center gap-2"},[l({class:"text-xl font-semibold pl-2"},e),l({class:"text-sm text-muted-foreground"},`${s} participants`)])]),i=({action:e,className:s,icon:a})=>c({class:s,click:e},[n({size:"sm"},a)]),x=({actions:e})=>t({class:"absolute bottom-6 left-0 right-0 flex items-center gap-4 w-60 mx-auto"},[i({action:e.toggleCamera,className:"w-12 h-12 rounded-full bg-gray-800 hover:bg-gray-700 flex items-center justify-center",icon:r.videoCamera.default}),i({action:e.toggleMute,className:"w-12 h-12 rounded-full bg-gray-800 hover:bg-gray-700 flex items-center justify-center",icon:r.microphone}),i({action:e.endCall,className:"w-12 h-12 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center",icon:r.x}),i({action:e.toggleFullscreen,className:"w-12 h-12 rounded-full bg-gray-800 hover:bg-gray-700 flex items-center justify-center",icon:r.expand})]),p=({participants:e})=>t({class:"flex flex-col gap-2 w-60"},e.map(s=>t({class:"overflow-hidden rounded-lg shadow-sm"},[d({name:s.name,isMuted:s.isMuted})]))),h=({participants:e})=>t({class:"flex-1 p-4 flex gap-4"},[t({class:"flex-1 relative"},[d({name:"You",isMuted:!1,isMainParticipant:!0}),x({actions:{toggleMute:()=>console.log("Toggle mute"),toggleCamera:()=>console.log("Toggle camera"),endCall:()=>{if(console.log("End call"),window.history.length>2){window.history.back();return}app.navigate("/messages/all")},toggleFullscreen:()=>console.log("Toggle fullscreen")}})]),p({participants:e})]),o={CALLING:"calling",CONNECTED:"connected",ENDED:"ended",ERROR:"Error connecting"},b=[{name:"Craig Press",isMuted:!0},{name:"Makenna Bergson",isMuted:!1},{name:"Allison Septimus",isMuted:!1}],y=({participants:e})=>t({class:"flex flex-auto flex-col"},[m({title:"Video Chat",participantCount:4}),h({participants:e})]),w=({onCancel:e})=>t({class:"flex flex-auto flex-col items-center justify-center space-y-6 bg-background/95"},[t({class:"w-24 h-24 rounded-full bg-muted flex items-center justify-center animate-pulse"},[g({src:"",size:"lg",fallbackText:"User Name"})]),t({class:"space-y-2 text-center"},[l({class:"text-xl font-semibold"},"Calling..."),l({class:"text-sm text-muted-foreground block"},"Waiting for others to join")]),c({class:"w-12 h-12 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center mt-8",click:e},[n({size:"sm"},r.x)])]),C=({onRedial:e,onExit:s})=>t({class:"flex flex-auto flex-col items-center justify-center space-y-6 bg-background/95"},[t({class:"w-16 h-16 rounded-full bg-muted flex items-center justify-center"},[n({size:"lg",class:"text-muted-foreground"},r.phone.missed)]),t({class:"space-y-2 text-center"},[l({class:"text-xl font-semibold"},"Call Ended"),l({class:"text-sm text-muted-foreground block"},"Duration: 45:23")]),t({class:"flex space-x-4"},[c({class:"px-6 py-2 rounded-full bg-primary text-primary-foreground hover:bg-primary/90",click:e},[n({size:"sm",class:"mr-2"},r.phone.default),l({},"Redial")]),c({class:"px-6 py-2 rounded-full bg-muted hover:bg-muted/90",click:s},[n({size:"sm",class:"mr-2"},r.x),l({},"Exit")])])]),E=({errorMessage:e,onRetry:s,onExit:a})=>t({class:"flex flex-auto flex-col items-center justify-center space-y-6 bg-background/95"},[t({class:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center"},[n({size:"lg",class:"text-red-500"},r.warning)]),t({class:"space-y-2 text-center max-w-md"},[l({class:"text-xl font-semibold text-red-500"},"Connection Error"),l({class:"text-sm text-muted-foreground block"},e)]),t({class:"flex space-x-4"},[c({class:"px-6 py-2 rounded-full bg-primary text-primary-foreground hover:bg-primary/90",click:s},[n({size:"sm",class:"mr-2"},r.refresh),l({},"Retry")]),c({class:"px-6 py-2 rounded-full bg-muted hover:bg-muted/90",click:a},[n({size:"sm",class:"mr-2"},r.x),l({},"Exit")])])]),k=()=>{const e={setupStates(){return{view:o.CALLING,errorMessage:""}},handleExit(){if(window.history.length>2){window.history.back();return}app.navigate("/messages/all")},handleRetry(s){this.state.view=o.CALLING}};return new u(e,[t({class:"flex flex-col w-full h-screen bg-background"},[f("view",(s,a)=>{switch(s){case o.CALLING:return w({onCancel:e.handleExit});case o.CONNECTED:return y({participants:b});case o.ENDED:return C({onRedial:()=>e.handleRetry(a),onExit:e.handleExit});case o.ERROR:return E({errorMessage:a.state.errorMessage||"Failed to connect to the call. Please check your connection and try again.",onRetry:()=>e.handleRetry(a),onExit:e.handleExit})}})])])};export{x as Controls,m as Header,p as ParticipantsList,k as VideoChatPage,d as VideoContainer,k as default};
