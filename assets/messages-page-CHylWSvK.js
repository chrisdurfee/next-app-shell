import{Y as t,l as b,U as T,a7 as D,W as p,J as f,z as o,m as g,al as x,b as v,G as m,w as c,o as l,d as w,aj as k,aa as S,y as C,a1 as M,am as Y,F as O,a as H,a0 as h,P as j}from"./index-DA2FGZN4.js";import{S as P}from"./sidebar-menu-page-nCAVFk3R-BtKr2xIG.js";import{D as z,V as r}from"./tooltip-Cy5agtG6-BcJKSIuZ.js";import{u as B,l as R,r as G,e as W}from"./signature-panel-CrKk8upb-CHkLyiLv.js";import"./mobile-nav-wrapper-BE_hr65B-B97p8BEy.js";const d=[{id:1,sender:"Angelina Froster",content:"Let's go on a date tomorrow 😘",time:"2024-06-07T13:05:00",status:"online",avatar:"https://example.com/avatars/angelina.png",unreadCount:2,thread:[{id:101,sender:"Angelina Froster",avatar:"https://example.com/avatars/angelina.png",status:"online",time:"2024-06-07T13:00:00",direction:"received",content:"Hi! Are you free tomorrow?"},{id:102,sender:"You",avatar:null,status:"online",time:"2024-06-07T13:02:00",direction:"sent",content:"Yes, I'm free! What's up?"},{id:103,sender:"Angelina Froster",avatar:"https://example.com/avatars/angelina.png",status:"online",time:"2024-06-07T13:05:00",direction:"received",content:"Let's go on a date tomorrow 😘"}]},{id:2,sender:"Frances Swann",content:"YOU: Okay, let's do it.",time:"2024-06-06T12:00:00",status:"online",avatar:"https://example.com/avatars/frances.png",unreadCount:0,thread:[{id:201,sender:"Ricky Smith",avatar:"https://example.com/avatars/ricky.png",status:"online",time:"2024-06-06T11:00:00",direction:"received",content:"Hi! How are you? 😍"},{id:202,sender:"Ricky Smith",avatar:"https://example.com/avatars/ricky.png",status:"online",time:"2024-06-06T11:00:00",direction:"received",audioUrl:"/audio/ricky-voice.mp3",audioDuration:"01:30"},{id:203,sender:"You",avatar:null,status:"online",time:"2024-06-06T11:00:00",direction:"sent",content:"Hey Ricky! I'm Feeling Amazing, how about you?"},{id:204,sender:"You",avatar:null,status:"online",time:"2024-06-06T11:00:00",direction:"sent",content:"That's a cool idea! 🤓",credits:0,sentTime:"12:42 PM"},{id:205,sender:"Ricky Smith",avatar:"https://example.com/avatars/ricky.png",status:"online",time:"2024-06-06T11:00:00",direction:"received",content:"Hey, so happy you are down! 🦄"}]},{id:3,sender:"Ricky Smith",content:"It's not a time for joking my...",time:"2024-01-02T09:30:00",status:"away",avatar:"https://example.com/avatars/ricky.png",unreadCount:0,thread:[{id:301,sender:"Ricky Smith",avatar:"https://example.com/avatars/ricky.png",status:"away",time:"2024-01-02T09:00:00",direction:"received",content:"Hello, got a minute?"},{id:302,sender:"You",avatar:null,status:"online",time:"2024-01-02T09:05:00",direction:"sent",content:"Sure, what's up?"},{id:303,sender:"Ricky Smith",avatar:"https://example.com/avatars/ricky.png",status:"away",time:"2024-01-02T09:30:00",direction:"received",content:"It's not a time for joking my..."}]},{id:4,sender:"Tina Belcher",content:"I found a cool article about AI",time:"2024-05-10T10:15:00",status:"offline",avatar:"https://example.com/avatars/tina.png",unreadCount:1,thread:[{id:401,sender:"Tina Belcher",avatar:"https://example.com/avatars/tina.png",status:"offline",time:"2024-05-10T10:10:00",direction:"received",content:"Hey, check out this AI article!"},{id:402,sender:"You",avatar:null,status:"online",time:"2024-05-10T10:12:00",direction:"sent",content:"Sure, send me the link."},{id:403,sender:"Tina Belcher",avatar:"https://example.com/avatars/tina.png",status:"offline",time:"2024-05-10T10:15:00",direction:"received",content:"Here it is: https://example.com/ai-article"}]},{id:5,sender:"Mark Johnson",content:"Don't forget the meeting at 3 PM.",time:"2024-07-01T08:00:00",status:"online",avatar:"https://example.com/avatars/mark.png",unreadCount:0,thread:[{id:501,sender:"Mark Johnson",avatar:"https://example.com/avatars/mark.png",status:"online",time:"2024-07-01T07:58:00",direction:"received",content:"Meeting at 3 PM. Be there!"},{id:502,sender:"You",avatar:null,status:"online",time:"2024-07-01T08:00:00",direction:"sent",content:"Got it, I'll be there."}]},{id:6,sender:"Olivia Brown",content:"Thanks for the gift! 🎁",time:"2024-04-23T18:20:00",status:"online",avatar:"https://example.com/avatars/olivia.png",unreadCount:3,thread:[{id:601,sender:"Olivia Brown",avatar:"https://example.com/avatars/olivia.png",status:"online",time:"2024-04-23T18:15:00",direction:"received",content:"I got your gift, it's amazing!"},{id:602,sender:"You",avatar:null,status:"online",time:"2024-04-23T18:16:00",direction:"sent",content:"Glad you like it 😄"},{id:603,sender:"Olivia Brown",avatar:"https://example.com/avatars/olivia.png",status:"online",time:"2024-04-23T18:20:00",direction:"received",content:"Let's meet up soon!"}]},{id:7,sender:"Jason Li",content:"Can you review the doc?",time:"2024-05-22T09:45:00",status:"busy",avatar:"https://example.com/avatars/jason.png",unreadCount:0,thread:[{id:701,sender:"Jason Li",avatar:"https://example.com/avatars/jason.png",status:"busy",time:"2024-05-22T09:40:00",direction:"received",content:"Please review the doc I sent."},{id:702,sender:"You",avatar:null,status:"online",time:"2024-05-22T09:45:00",direction:"sent",content:"Will do today."}]},{id:8,sender:"Emma Green",content:"Pic: Check out this sunset.",time:"2024-06-20T19:30:00",status:"online",avatar:"https://example.com/avatars/emma.png",unreadCount:1,thread:[{id:801,sender:"Emma Green",avatar:"https://example.com/avatars/emma.png",status:"online",time:"2024-06-20T19:25:00",direction:"received",content:"Check out this sunset I captured!"},{id:802,sender:"You",avatar:null,status:"online",time:"2024-06-20T19:30:00",direction:"sent",content:"Wow, that's beautiful!"}]},{id:9,sender:"Liam Thomas",content:"Let's finalize the report.",time:"2024-03-15T14:00:00",status:"offline",avatar:"https://example.com/avatars/liam.png",unreadCount:4,thread:[{id:901,sender:"Liam Thomas",avatar:"https://example.com/avatars/liam.png",status:"offline",time:"2024-03-15T13:50:00",direction:"received",content:"We need to finalize the report before EOD."},{id:902,sender:"You",avatar:null,status:"online",time:"2024-03-15T13:55:00",direction:"sent",content:"On it!"},{id:903,sender:"Liam Thomas",avatar:"https://example.com/avatars/liam.png",status:"offline",time:"2024-03-15T14:00:00",direction:"received",content:"Thanks, much appreciated."}]},{id:10,sender:"Noah Martinez",content:"Great job on the presentation.",time:"2024-02-10T11:15:00",status:"online",avatar:"https://example.com/avatars/noah.png",unreadCount:0,thread:[{id:1001,sender:"Noah Martinez",avatar:"https://example.com/avatars/noah.png",status:"online",time:"2024-02-10T11:10:00",direction:"received",content:"Great job on the presentation today!"},{id:1002,sender:"You",avatar:null,status:"online",time:"2024-02-10T11:15:00",direction:"sent",content:"Thank you! I was nervous."}]},{id:11,sender:"Sophia Carter",content:"Lunch later?",time:"2024-08-01T12:00:00",status:"online",avatar:"https://example.com/avatars/sophia.png",unreadCount:2,thread:[{id:1101,sender:"Sophia Carter",avatar:"https://example.com/avatars/sophia.png",status:"online",time:"2024-08-01T11:55:00",direction:"received",content:"Lunch later? I'm craving sushi."},{id:1102,sender:"You",avatar:null,status:"online",time:"2024-08-01T12:00:00",direction:"sent",content:"Sounds good to me!"}]},{id:12,sender:"Ava Robinson",content:"Check the code review comments",time:"2024-09-10T09:20:00",status:"online",avatar:"https://example.com/avatars/ava.png",unreadCount:1,thread:[{id:1201,sender:"Ava Robinson",avatar:"https://example.com/avatars/ava.png",status:"online",time:"2024-09-10T09:10:00",direction:"received",content:"Check my code review comments."},{id:1202,sender:"You",avatar:null,status:"online",time:"2024-09-10T09:20:00",direction:"sent",content:"Will look now."}]},{id:13,sender:"William Lee",content:"Party tonight! 🎉",time:"2024-10-05T17:45:00",status:"online",avatar:"https://example.com/avatars/william.png",unreadCount:3,thread:[{id:1301,sender:"William Lee",avatar:"https://example.com/avatars/william.png",status:"online",time:"2024-10-05T17:40:00",direction:"received",content:"Party at my place tonight, you coming?"},{id:1302,sender:"You",avatar:null,status:"online",time:"2024-10-05T17:42:00",direction:"sent",content:"Absolutely!"},{id:1303,sender:"William Lee",avatar:"https://example.com/avatars/william.png",status:"online",time:"2024-10-05T17:45:00",direction:"received",content:"Bring some chips 🍟"}]}],E=e=>a=>f({class:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 cursor-pointer",href:`messages/all/${a.id}`,onSet:[e,"messageId",{"bg-muted/50":a.id.toString()}]},[t({class:"flex items-center gap-2"},[t({class:"relative flex-none"},[g({src:a.avatar,alt:a.sender,fallbackText:a.sender,size:"sm"}),t({class:"absolute bottom-0 right-0"},[x(a.status)])]),o({class:"text-sm font-medium"},a.sender)])]),N=()=>t({class:"flex-auto flex-col pb-12 hidden lg:flex p-6 border-l bg-sidebar w-full max-w-[320px] h-full"},[b({class:"pb-4 px-2 flex flex-col"},[D({class:"scroll-m-20 text-lg font-bold tracking-tight"},"Connections")]),T(({route:e})=>new p({key:"id",items:d,class:"flex flex-col space-y-1 mt-4",rowItem:E(e)}))]),$=({filter:e})=>t({class:"m-4 mt-8 p-4 border rounded-md items-center justify-center text-center"},[v({class:"text-xl font-semibold text-muted-foreground text-center"},"No Chats Found"),m(`We couldn't find any messages in "${e}" list.`),c({variant:"outline",class:"my-8"},"Start a new chat")]),F=()=>t({class:"flex mr-2"},[z({content:"Add Message",position:"left"},[c({variant:"icon",class:"outline",icon:l.circlePlus})])]),U=()=>b({class:"px-4 pb-2 lg:p-4 bg-card"},[t({class:"flex justify-between items-center"},[v({class:"pl-2 lg:pl-0 text-3xl lg:text-xl font-bold"},"Messages"),t({class:"flex"},[F(),t({class:"hidden lg:flex"},[new B({options:[{label:"All",value:"all"},{label:"Unread",value:"unread"}],onSelect:(e,{state:a})=>a.filter=e})])])])]),_=()=>t({class:"flex items-center gap-3 p-4 lg:p-5 hover:bg-muted rounded-md"},[r({shape:"circle",width:"w-12",height:"h-12",class:"flex-none"}),t({class:"flex flex-col flex-1 gap-1"},[r({width:"w-1/2",height:"h-4",class:"rounded"}),r({width:"w-2/3",height:"h-3",class:"rounded mt-1"})]),r({width:"w-10",height:"h-3",class:"rounded"})]),J=w({state:{loaded:!1},render(){const e=this.message,a=this.parent.parent.route;return setTimeout(()=>this.state.loaded=!0,500),t({class:"transition-all",onState:["loaded",i=>i?f({href:`messages/${a.page}/${e.id}`,class:`
                        flex items-center gap-3 p-4 lg:p-5 rounded-md hover:bg-muted/50
                    `,onSet:[a,"messageId",{"bg-muted/50":e.id.toString()}]},[t({class:"relative flex-none"},[g({src:e.avatar,alt:e.sender,fallbackText:e.sender,size:"md"}),t({class:"absolute bottom-0 right-0"},[x(e.status)])]),t({class:"flex flex-col flex-1"},[t({class:"flex items-center justify-between"},[m({class:"font-semibold text-base text-foreground"},e.sender),t({class:"text-xs text-muted-foreground"},k({dateTime:e.time}))]),t({class:"flex items-center justify-between mt-1"},[m({class:"text-sm text-muted-foreground line-clamp-1"},e.content),e.unreadCount>0&&t({class:"ml-2 bg-primary text-primary-foreground text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center"},e.unreadCount.toString())])])]):_()]})}}),u=(e,a)=>a==="unread"?e.filter(s=>s.unreadCount>=1):e,q=()=>t({class:"w-full pt-0 lg:pt-2 space-y-2 lg:overflow-y-auto lg:max-h-screen"},[U(),t([S("page",(e,a,{data:s,state:i})=>{e||(e="all",app.navigate("messages/all",null,!0));let n=d;e!=="all"&&(n=[]),n=u(n,i.filter),s.items=n}),C("filter",(e,a,{route:s,data:i})=>{let n=d;s.page!=="all"&&(n=[]),n=u(n,e),i.items=n}),M("items",(e,a,{state:s})=>(e=u(e,s.filter),e.length?new p({cache:"list",key:"id",items:e,role:"list",class:"space-y-2 px-4 pb-4",rowItem:i=>new J({message:i})}):$({filter:s.filter})))])]),K=(e,a)=>e>a?!0:null,V=()=>t({class:"flex justify-between"},[c({type:"submit",variant:"icon",click:()=>console.log("Send email"),icon:l.airplane,class:"text-foreground hover:text-accent",onSet:["empty",(e,a)=>a.disabled=e]})]),Q=w({state(){return{empty:!0,charCount:0,charLimit:this.charLimit??5e3,isOverLimit:!1}},submit(){console.log("message sent"),this.add(this.textarea.value),this.textarea.value="",this.state.charCount=0,this.state.isOverLimit=!1,this.state.empty=!0},checkSubmit(e){if(this.resizeTextarea(),e.keyCode===13)if(e.ctrlKey===!0){if(this.state.empty===!0||this.state.isOverLimit===!0){e.preventDefault(),e.stopPropagation(),app.notify({icon:l.warning,type:"warning",title:"Missing Message",description:"Please enter a message."});return}e.preventDefault(),e.stopPropagation(),this.submit()}else this.resizeTextarea()},resizeTextarea(){let a=48;if(this.textarea.value!==""){const s=this.textarea.scrollHeight;a=s>48?s:48}this.textarea.style="height:"+a+"px;"},render(){const e=this.state.charLimit,a=s=>{const i=s.target.value,n=this.state;n.charCount=i.length,n.isOverLimit=K(i.length,e),n.empty=i.length===0};return t({class:"fadeIn p-4 w-full lg:max-w-5xl m-auto"},[Y({class:"relative flex border rounded-lg p-3 bg-surface",submit:()=>this.submit()},[t([c({variant:"icon",icon:l.microphone,class:"text-foreground hover:text-accent",click:()=>console.log("Recording audio!")})]),O({class:"w-full border-none bg-transparent resize-none focus:outline-none focus:ring-0 text-sm text-foreground placeholder-muted-foreground",cache:"textarea",placeholder:this.placeholder,input:a,bind:this.bind,required:!0,keyup:s=>this.checkSubmit(s)}),t({class:"flex flex-col"},[V()])])])}}),X=e=>{const a=parseInt(String(e),10);return d.find(s=>s.id===a)||null},Z=()=>t({class:"flex items-center p-4 border-b"},[t({class:"flex flex-auto items-center gap-3 lg:max-w-5xl m-auto"},[t({class:"flex lg:hidden"},[r({width:"w-10",height:"h-10"})]),r({shape:"circle",width:"w-12",height:"h-12"}),r({width:"w-32",height:"h-4"}),r({width:"w-16",height:"h-4",class:"ml-auto"})])]),ee=()=>t({class:"flex flex-col gap-4 w-full h-full max-w-none lg:max-w-5xl m-auto p-4"},[r({width:"w-1/2",height:"h-8",class:"rounded"}),r({width:"w-2/3",height:"h-8",class:"rounded self-end"}),r({width:"w-1/4",height:"h-8",class:"rounded"})]),te=w({state:{loaded:!1},render(){const e=X(this.messageId);return setTimeout(()=>this.state.loaded=!0,500),t({class:"flex flex-auto flex-col w-full max-h-screen bg-background"},[C("loaded",(s,i,n)=>!s||!e?t([Z(),ee()]):t({class:"flex flex-col flex-auto max-h-screen"},[ae(e),ne(e),new Q({placeholder:"Type something...",add:y=>{const I=new Date().toISOString(),A={id:Math.random()*1e3,time:I,direction:"sent",content:y};n.thread.append(A),this.mingle([{...e,content:"YOU: "+y}])}})]))])}}),ae=e=>t({class:"flex items-center p-4 border-b"},[t({class:"flex flex-auto items-center gap-3 lg:max-w-5xl m-auto"},[t({class:"flex lg:hidden"},[R({margin:"m-0 ml-0",backUrl:"messages"})]),t({class:"relative"},[g({src:e.avatar,alt:e.sender,fallbackText:e.sender,size:"md"}),t({class:"absolute bottom-0 right-0"},[x(e.status)])]),t({class:"flex flex-col"},[o({class:"font-semibold text-base text-foreground"},e.sender),o({class:"text-xs text-muted-foreground"},"PRO")]),t({class:"ml-auto flex items-center gap-4"},[f({class:"bttn icon",href:"/messages/all/video/"+e.id},[H(l.videoCamera.default)]),c({variant:"icon",icon:l.phone.default})])])]),se=e=>t({class:"flex items-center justify-center mt-4"},[o({class:"text-xs text-muted-foreground bg-background px-2"},h.format("standard",e))]),ne=e=>t({class:"flex flex-col flex-grow overflow-y-auto p-4"},[t({class:"flex flex-col w-full h-full max-w-none lg:max-w-5xl m-auto"},[new p({cache:"thread",key:"id",items:e.thread,role:"list",divider:{itemProperty:"time",layout:se,customCompare:(a,s)=>h.format("standard",a)!==h.format("standard",s)},class:"flex flex-col gap-4 ",rowItem:a=>ie(a)})])]),ie=e=>{const a=e.direction==="sent",s=a?"bg-primary text-primary-foreground self-end rounded-tr-none":"bg-muted text-foreground self-start rounded-tl-none";return t({class:"group flex flex-col max-w-[80%]"+(a?" ml-auto":" mr-auto")},[t({class:"mb-1 flex items-center"},[a?o({class:"text-xs text-muted-foreground mr-2 opacity-0 group-hover:opacity-100 transition-opacity"},"You"):o({class:"text-xs text-muted-foreground mr-2"},e.sender),o({class:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out text-xs text-muted-foreground ml-2"},k({dateTime:e.time}))]),t({class:`rounded-md p-3 ${s}`},[e.content&&o({class:"text-sm"},e.content),e.audioUrl&&re(e.audioUrl,e.audioDuration)]),e.credits>=0&&t({class:"text-[11px] text-muted-foreground mt-1"},`Sent for ${e.credits} credits | ${e.sentTime}`)])},re=(e,a)=>t({class:"flex items-center gap-3 mt-1"},[t({class:"bg-background/50 p-2 rounded-md text-sm"},"Audio wave placeholder"),o({class:"text-xs"},a||"00:00")]),L=()=>t({class:"m-4 mt-8 p-4 border rounded-md items-center justify-center text-center"},[v({class:"text-xl font-semibold text-muted-foreground text-center"},"No Thread Selected"),m("Select a message from the list to view the conversation."),c({variant:"outline",class:"my-8"},"Start New Thread")]),oe=e=>()=>new G([S("messageId",a=>a?new te({messageId:a,delete:e.delete,mingle:e.mingle}):L())]),le=()=>new W([t({class:"hidden lg:flex flex-auto flex-col"},[t({class:"flex auto flex-col w-full h-full"},[L()])])]),ce=e=>t({class:"flex-auto flex-col w-full h-full hidden lg:flex",switch:[{uri:"messages/:page/:messageId*",component:oe(e)},{uri:"messages*",component:le}]}),fe=()=>{const e={setData(){return new j({items:d})},afterSetup(){this.route.page||app.navigate("messages/all",null,!0)},setupStates(){return{filter:"all"}}};return new P(e,[t({class:"flex w-full flex-col lg:flex-row h-full"},[t({class:"flex flex-auto w-full lg:max-w-[460px] lg:border-r"},[q()]),T(a=>ce({delete:s=>{a.list.delete(s),app.navigate(`messages/${a.route.page}`),app.notify({type:"success",title:"Message Deleted",description:"The message has been deleted."})},mingle(s){a.list.mingle(s)}})),N()])])};export{fe as MessagesPage,fe as default};
