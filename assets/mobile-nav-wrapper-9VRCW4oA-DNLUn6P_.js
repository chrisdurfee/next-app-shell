import{r as n,m as u,p as r,O as d,h as g,v as i,w as b,z as l,x as o,y as w,a as S,s as c,b as y,U as p,Z as B,A as C,$ as h}from"./index-CAtlfimY.js";class L extends n{declareProps(){this.class="",this.checkCallBack=null}render(){const e=this.state;return y({class:this.class||"",onState:[["selected",{selected:!0}],["active",{active:!0}]],click:()=>{if(e.toggle("active"),!this.checkCallBack)return;const t=e.active?this:null;this.checkCallBack(t)}},this.children)}setupStates(){return{selected:!1,active:!1}}update(e){this.state.set({selected:e,active:e})}}const $=i(({options:s,click:e},t)=>({tag:"li",class:`relative flex flex-row w-auto text-left p-0 transition-all cursor-pointer min-w-[48px] option${s?" sub":""}`,click:e,children:t})),z=(s,e=null,t=!1)=>[e&&l({class:"icon w-12 rounded-md flex items-center justify-center min-w-12",onState:["selected",{selected:!0}]},[o({size:"sm"},e)]),w({class:"label flex flex-auto text-sm items-center cursor-pointer whitespace-nowrap"},s),t&&S({class:"flex justify-center items-center px-1 transition-all text-muted-foreground mr-2",onState:[["selected",{rotate:!0}],["active",{rotate:!0}]]},[o({size:"xs"},c.chevron.single.down)])];class f extends n{declareProps(){this.label="",this.icon=null,this.href=null,this.exact=!1,this.options=null,this.content=null,this.callBack=null,this.checkCallBack=null,this.link=null}render(){const e=!this.options&&this.callBack;return $({options:this.options,click:e},[this.addLink()])}addLink(){const e=this.options&&this.options.length>0,t=this.content||z(String(this.label),this.icon,e);return this.href?new g({class:"flex flex-auto flex-row rounded-md transition-all overflow-x-hidden",cache:"link",href:this.href,activeClass:"selected",exact:this.exact||!1},t):new L({class:"flex flex-auto flex-row rounded-md transition-all overflow-x-hidden",cache:"link",checkCallBack:this.checkCallBack},t)}isSelected(){return this.link.state.get("selected")}update(e){this.link.update(e)}}const N=i(({map:s},e)=>r({class:"navigation-group flex flex-col gap-2 list-none m-0 py-2 px-0",map:s},[b({class:"text-muted-foreground text-sm py-0 px-4 whitespace-nowrap"},e)]));class O extends n{declareProps(){this.options=[],this.class="",this.mobileBorder=!1}render(){const e=this.mapOptions(this.options),t=this.class||"",a=this.mobileBorder?"border md:border-0 rounded-md":"";return u({class:`navigation flex flex-auto flex-col ${t}`},[r({class:`relative group flex flex-col gap-2 py-2 px-2 list-none m-0 ${a}`,map:e}),...this.addSubs()])}mapOptions(e=[]){return[e.map(t=>t.group?this.addGroup(t):this.addLink(t)),t=>t]}addSubs(){return[]}addGroup(e){const t=this.mapOptions(e.options);return N({map:t},e.group)}addLink(e){return new f(e)}}class x extends O{onCreated(){this.links=[]}setupSubNav(e){return new I({parentLink:e,options:e.options})}addSubNav(e){const t=this.setupSubNav(e);return e.sub=t,t}addLink(e){const t=new f(e);if(this.links.push(t),!t.options)return t;const a=this.addSubNav(t);return{class:"child-group",link:t,sub:a}}}const P=(s,e)=>new RegExp(`${s}($|/|\\.).*`).test(e),E=(s,e)=>{const t=s.link.panel.pathname;return!t&&s.isSelected()?!0:s.exact?e===t:P(t,e)};class I extends x{declareProps(){super.declareProps(),this.parentLink=null,this.mainClassName=""}render(){const e=`navigation flex flex-auto flex-col sub ${this.mainClassName||""}`,t=this.mapOptions(this.options);return u({class:e,onState:this.onState()},[r({class:"relative group flex flex-col gap-2 py-2 px-0 list-none m-0"},[...t,...this.addSubs(),this.addWatcher()])])}addWatcher(){return{watch:{value:["[[path]]",d.data],callBack:this.updateLinks.bind(this)}}}onState(){return[["selected",{active:!0}],["active",{active:!0}]]}setupStates(){return{remotes:[{id:this.parentLink.link.getId(),selected:null,active:null}]}}afterSetup(){const e=d.data.path;this.updateLinks(e)}updateLinks(e){let t=!1;for(const a of this.links)if(a.rendered&&(t=E(a,e),t===!0))break;this.parentLink.update(t)}}const U=s=>h({class:"text-lg ml-2"},s),j=s=>l({class:"sticky flex flex-row items-center bg-popover lg:hidden top-0 z-10 border-0 border-b"},[p({variant:"icon",class:"m-2",click:(e,{state:t})=>t.toggle("open"),icon:c.arrows.left}),s.title&&U(s.title)]),G=()=>l({class:`
			absolute inset-0 bg-black/40 z-[-1] fadeIn
			transition-opacity duration-200
		`,click:(s,{state:e})=>e.open=!1});class W extends n{declareProps(){this.title=""}render(){return l({class:"fixed inset-0 z-50",style:"[[typeClass]]"},[G(),l({class:`
					absolute popIn w-auto p-0 bg-popover m-auto shadow-lg rounded-md top-0 bottom-0 left-2 right-2 max-h-[85vh] text-inherit block
				`,dataSet:["open",["expanded",!0,"true"]]},[l({class:"flex flex-auto flex-col w-full h-full overflow-y-auto max-h-[85vh] rounded-md bg-popover border"},[j({title:this.title}),l({class:"flex flex-auto flex-col"},this.children)])])])}setupStates(){return{open:{id:this.parent.getId(),callBack:e=>{e===!1&&(document.documentElement.style.overflowY="auto",this.destroy())}}}}afterSetup(){document.documentElement.style.overflowY="hidden"}setContainer(e){this.container=app.root}}const m=()=>p({class:"m-2",variant:"ghost",addState(){return{open:!1}},click:(s,{state:e})=>e.toggle("open")},[o({},c.bar.three)]),A=s=>h({class:"text-lg ml-2"},s),Y=s=>l({class:"flex flex-auto flex-row items-center lg:hidden"},[m(),s.title&&A(s.title)]),k=(s,e)=>{s.forEach(t=>{if(t.options){k(t.options,e);return}t.callBack=e})},v=s=>l({class:"bg-background flex flex-auto flex-col w-full relative"},[B("open",e=>e?[new W({title:s.title},[C(({state:t})=>{const a=Z=>t.open=!1;return k(s.options,a),new x({options:s.options})})])]:null)]),F=i(s=>l({cache:"mobileNav",class:"inline-flex relative lg:hidden"},[l([m(),v(s)])])),H=i(s=>l({cache:"mobileNav",class:"flex flex-auto flex-col w-full relative lg:hidden"},[l({class:"flex flex-auto flex-col w-full"},[Y(s),v(s)])]));export{H as F,F as q,x};
