import{ac as S,o as c,Y as t,g as p,G as l,a as y,b as u,s as r,j as v,l as b,X as k,e as T,an as L,F as D,w as m,t as A,z as I,a1 as P,O as z}from"./index-DPghUsg_.js";import{I as O,c as g,L as h,T as x,D as a,a as $}from"./tooltip-DcnXGw52-CrzgSVws.js";import{c as j}from"./sidebar-menu-page-DyIwNFwe-_6v_EzUu.js";import{g as E}from"./clients-DXcmJNc_.js";import"./signature-panel-Dl_Tkisq-Dujl8u5u.js";import"./mobile-nav-wrapper-CuATTfqK-DdgUhLMi.js";const w=e=>new S({title:"Edit Client",icon:c.pencil.square,description:"What client would you like to edit?",size:"sm",type:"right",onSubmit:()=>app.notify({type:"success",title:"Client Edited",description:"The client has been edited.",icon:c.check})},[t({class:"flex flex-col lg:p-4 space-y-8"},[t({class:"flex flex-auto flex-col w-full gap-4"},[O({legend:"Client Details"},[new p({name:"name",label:"Name",description:"The name of the client."},[g({type:"text",placeholder:"Client name",required:!0})]),new p({name:"location",label:"Location",description:"The location of the client."},[g({type:"text",placeholder:"Location",required:!0})])])])])]).open(),d=({title:e,value:s,icon:o})=>h({class:"bg-card border border-border rounded-lg p-4 min-w-[250px] min-h-32 hover:bg-muted/50 transition-colors",margin:"m-0"},t({class:"flex flex-col space-y-2"},[t({class:"flex items-center space-x-2 text-muted-foreground"},[y(o,{class:"text-lg"}),u({class:"text-sm font-medium"},e)]),l({class:"text-2xl font-bold text-foreground"},s)])),f=r((e,s)=>t({class:"space-y-6"},[b({class:"flex flex-col space-y-2"},[u({class:"text-xl font-semibold"},e.title),e.description&&l({class:"text-sm text-muted-foreground"},e.description)]),...s])),H=r(({client:e})=>t({class:"flex items-center space-x-4 my-0"},[v({src:e.avatar,alt:e.name,fallbackText:e.name,size:"lg"}),t({class:"flex flex-col space-y-1"},[t({class:"flex items-baseline space-x-2"},[u({class:"text-2xl font-semibold text-foreground"},e.name),l({class:"text-sm text-muted-foreground"},e.code)]),t({class:"flex items-center space-x-2"},[l({class:"text-sm text-muted-foreground"},e.contactName),x({variant:e.status==="Active"?"primary":"secondary"},e.status)])])])),q=r(({client:e})=>t({class:"hidden md:flex overflow-x-auto -mx-6 px-6 pb-4"},t({class:"inline-flex flex-auto space-x-4 ml-[-24px] pl-6"},[d({title:"Payment Amount",value:`$${e.payment}`,icon:c.creditCard}),d({title:"Package",value:e.package,icon:c.cube}),d({title:"Next Due Date",value:e.nextDue,icon:c.calendar.default}),d({title:"Secret Passphrase",value:e.passphrase,icon:c.locked}),d({title:"Client Since",value:e.since,icon:c.clock})]))),M=({about:e})=>f({title:"About"},[l({class:"text-base text-muted-foreground max-w-[800px]"},e)]),Y=r(({client:e})=>f({title:"Packages and Contract"},[h({class:"p-6",margin:"m-0"},[t({class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},[t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Contract expiration in 8 months"),t({class:"flex items-center space-x-2"},[l({class:"font-medium text-foreground"},e.contractExpires),x({variant:"secondary"},e.contractStatus)])]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Billing"),l({class:"font-medium text-foreground"},`${e.package} (ID: ${e.contractId}), $${e.payment} monthly`)])]),t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Upgrades"),t({class:"flex flex-wrap gap-2"},e.addOns.map(s=>x({variant:"outline"},s)))]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Sales Agent"),l({class:"font-medium text-foreground"},e.salesAgent)])])])])])),B=e=>{switch(e){case"high":return c.chevron.up;case"low":return c.chevron.down;default:return c.check}},N=r(e=>h({class:"flex items-center justify-between p-4 hover:bg-muted/10",margin:"m-2"},[t({class:"flex items-center space-x-4"},[y(B(e.priority)),t({class:"flex flex-col"},[l({class:"font-medium"},e.subject),l({class:"text-sm text-muted-foreground"},e.owner)])]),x({variant:e.status==="Open"?"primary":"secondary"},e.status)])),F=r(({client:e})=>f({title:"Tickets"},[new k({cache:"tickets",key:"id",items:e.tickets,role:"list",rowItem:N})])),G=({client:e})=>t({class:"flex flex-auto flex-col space-y-12 mt-6"},[H({client:e}),q({client:e}),M(e),Y({client:e}),F({client:e})]),K=()=>{const e=t({class:"space-y-4"},[a({width:"w-24",height:"h-6",class:"rounded-md"}),a({width:"w-full",height:"h-24",class:"rounded-md"})]),s=t({class:"space-y-4"},[a({width:"w-32",height:"h-6",class:"rounded-md"}),t({class:"pl-6 space-y-6"},[0,1].map(()=>t({class:"flex items-center space-x-4"},[a({width:"w-5",height:"h-5",class:"rounded-full"}),t({class:"space-y-1"},[a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/4",height:"h-3",class:"rounded-md"})])])))]),o=t({class:"space-y-4"},[a({width:"w-36",height:"h-6",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-2/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/2",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-6",class:"rounded-full"})]))])])]),i=t({class:"space-y-4"},[a({width:"w-20",height:"h-6",class:"rounded-md"}),t({class:"flex flex-wrap gap-2"},Array(5).fill().map(()=>a({width:"w-20",height:"h-6",class:"rounded-full"})))]),n=t({class:"space-y-4"},[a({width:"w-40",height:"h-6",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-1/4",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/5",height:"h-4",class:"rounded-md"})]))])])]),C=t({class:"flex-1 space-y-12 mt-6 px-6"},[e,s,o,i,n]);return t({class:"p-6 pt-0 2xl:mx-auto w-full 2xl:max-w-[1600px] space-y-8"},[a({width:"w-20",height:"h-6",class:"rounded-md"}),t({class:"flex flex-col lg:flex-row lg:space-x-8"},[C])])},R=(e,s)=>e>s?!0:null,U=()=>t({class:"flex justify-between"},[m({type:"submit",variant:"icon",click:()=>console.log("Send email"),icon:c.airplane,class:"text-foreground hover:text-accent",onSet:["empty",(e,s)=>s.disabled=e]})]),W=T({state(){return{empty:!0,charCount:0,charLimit:this.charLimit??5e3,isOverLimit:!1}},submit(){console.log("message sent"),this.add(this.textarea.value),this.textarea.value="",this.state.charCount=0,this.state.isOverLimit=!1,this.state.empty=!0},checkSubmit(e){if(this.resizeTextarea(),e.keyCode===13)if(e.ctrlKey===!0){if(this.state.empty===!0||this.state.isOverLimit===!0){e.preventDefault(),e.stopPropagation(),app.notify({icon:c.warning,type:"warning",title:"Missing Message",description:"Please enter a message."});return}e.preventDefault(),e.stopPropagation(),this.submit()}else this.resizeTextarea()},resizeTextarea(){let s=48;if(this.textarea.value!==""){const o=this.textarea.scrollHeight;s=o>48?o:48}this.textarea.style="height:"+s+"px;"},render(){const e=this.state.charLimit,s=o=>{const i=o.target.value,n=this.state;n.charCount=i.length,n.isOverLimit=R(i.length,e),n.empty=i.length===0};return t({class:"fadeIn p-4 w-full lg:max-w-5xl m-auto"},[L({class:"relative flex border rounded-lg p-3 bg-surface",submit:()=>this.submit()},[t([m({variant:"icon",icon:c.microphone,class:"text-foreground hover:text-accent",click:()=>console.log("Recording audio!")})]),D({class:"w-full border-none bg-transparent resize-none focus:outline-none focus:ring-0 text-sm text-foreground placeholder-muted-foreground",cache:"textarea",placeholder:this.placeholder,input:s,bind:this.bind,required:!0,keyup:o=>this.checkSubmit(o)}),t({class:"flex flex-col"},[U()])])])}}),X=e=>t({class:"flex justify-center mt-4"},[I({class:"text-xs text-muted-foreground bg-background p-2"},e.split("T")[0])]),_=r(e=>t({class:"flex space-x-3 px-6 py-4 hover:bg-muted/10 rounded"},[v({src:e.avatar,alt:e.user,fallbackText:e.user,size:"sm"}),t({class:"flex-1 space-y-1"},[l({class:"text-sm font-medium"},e.user),l({class:"text-sm text-foreground"},e.text),e.attachments&&t({class:"flex space-x-2 mt-2"},[e.attachments.map(s=>A({src:s.src,alt:s.name,class:"w-16 h-16 rounded"}))])])])),J=r(({client:e})=>t({class:"flex flex-auto flex-col h-full space-y-4 p-0"},[b({class:"flex flex-col space-y-2 p-6"},[u({class:"text-lg text-muted-foreground"},"Conversation")]),t({class:"flex-1 overflow-y-auto space-y-2"},[new k({cache:"conversation",key:"id",items:e.conversation,role:"list",class:"flex flex-col",divider:{itemProperty:"date",layout:X,customCompare:(s,o)=>s.split("T")[0]!==o.split("T")[0]},rowItem:_})]),new W({placeholder:"Add a comment...",add:s=>{}})])),Q={class:"flex flex-auto flex-col w-full",setData(){return new z({loaded:!1,user:null})},afterSetup(){const e=this.route,s=E(e.clientId);setTimeout(()=>this.data.set({client:s,loaded:!0}),500)},beforeDestroy(){this.data.delete(),this.data.loaded=!1}},V=e=>t({class:"flex flex-row justify-between gap-4 p-4 lg:p-6"},[u({class:"text-2xl font-medium"},"Client Summary"),t({class:"flex flex-row space-x-2"},[t({class:"hidden lg:inline-flex"},[m({variant:"withIcon",class:"text-muted-foreground outline",icon:c.pencil.square,click:w},"Edit")]),t({class:"flex lg:hidden mr-4"},[$({content:"Edit",position:"left"},m({variant:"icon",class:"outline",icon:c.pencil.square,click:w}))])])]),oe=()=>new j(Q,[P("loaded",(e,s,{data:o})=>{if(!e)return K();const i=o.client;return i?t({class:"flex flex-auto p-0 pt-0 w-full"},[t({class:"flex flex-auto flex-col lg:flex-row"},[t({class:"flex flex-auto flex-col"},[t({class:"flex flex-col 2xl:mx-auto 2xl:max-w-[1600px] p-6"},[V(),G({client:i})])]),t({class:"hidden 2xl:flex flex-1 min-w-[320px] border-l"},[J({client:i})])])]):t({class:"text-center"},"Client not found.")})]);export{oe as SummaryPage,oe as default};
