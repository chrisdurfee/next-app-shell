import{t as S,J as o,_ as w,Z as D,h as p,g as O,b as d,o as f,a2 as y,ac as F,O as _}from"./index-hWGsH4EU.js";import{S as W,r as A}from"./sidebar-menu-page-BVryQj2Z-CZl7v-Ng.js";import{D as E}from"./tooltip-Pwsjx1Gp-DhEZpVMB.js";import"./mobile-nav-wrapper-Dj67Pb8l-CfCxWkAi.js";const g=t=>(t*=1,t<10?`0${t}`:String(t)),H=t=>(t.indexOf("T")===-1&&t.indexOf(" ")===-1&&(t+="T00:00:01"),t.replace(" ","T"),t),N=t=>t.replace(/-/g,"_"),i=(t,e,n)=>`${t}-${g(e+1)}-${g(n)}`,P=()=>Math.floor(Math.random()*28)+1,j=(t,e)=>{const n=[];for(let a=0;a<6;a++)n.push(`_${e}_${g(t+1)}_${g(P())}`);return n},M=(t,e)=>{const n=j(Number(t),Number(e)),r={};return n.forEach((a,s)=>{r[a]=r[a]??[];const u=Math.floor(Math.random()*5)+1;for(let c=0;c<u;c++)r[a].push(`Event ${s+1}.${c+1}`)}),r},X=t=>t?"bg-accent text-primary":"",R=t=>t?"text-muted-foreground opacity-50":"",V=(t,e)=>t===e,z=(t,e)=>V(t,e)?"bg-primary text-primary-foreground":"",B=(t,e,n,r)=>{const a=z(e,r);if(a)return a;const s=X(t);if(t)return s;const u=R(n);return n?u:"text-foreground"},G=t=>D({class:"bg-primary w-1 h-1 rounded-full m-[2px]"}),I=(t,e)=>e===3?D({class:"px-1 border rounded-md text-sm text-muted-foreground bg-secondary"},"..."):e>3?null:D({class:"px-1 border rounded-md text-sm text-muted-foreground bg-secondary"},t),v=({day:t,currentDate:e,date:n,isToday:r,isOutsideMonth:a,select:s})=>S({href:"/calendar/month/"+n,class:`
		flex flex-auto flex-col p-2 rounded-md
		hover:bg-muted/50 focus:z-10 items-center lg:items-start
	  `,disabled:t===null,"aria-label":t?`Day ${t}`:null,click:()=>s(n)},[o({class:"flex items-center justify-center w-full"},[w({class:`p-2 rounded-lg text-sm font-medium ${B(r,e,a,n)}`},String(t))]),o({class:"flex lg:hidden flex-auto flex-row flex-wrap",for:[`events._${N(n)}`,G]}),o({class:"hidden lg:flex flex-auto flex-col space-y-1",for:[`events._${N(n)}`,I]})]),b=(t,e,n,r)=>t===r.date&&e===r.month&&n===r.year,J=(t,e,n)=>{const{year:r,month:a}=t,s=i(r,a,t.date),u=new Date(r,a,1).getDay(),c=new Date(r,a+1,0).getDate(),h=new Date(r,a,0).getDate(),m=[],C=a===0?11:a-1,$=a===0?r-1:r;for(let l=u-1;l>=0;l--){const x=b(h-l,C,$,e);m.push(v({day:h-l,currentDate:s,date:i($,C,h-l),isToday:x,isOutsideMonth:!0,select:n}))}for(let l=1;l<=c;l++){const x=b(l,a,r,e);m.push(v({day:l,currentDate:s,date:i(r,a,l),isToday:x,isOutsideMonth:!1,select:n}))}const k=a===11?0:a+1,T=a===11?r+1:r,Y=(7-m.length%7)%7;for(let l=1;l<=Y;l++){const x=b(l,k,T,e);m.push(v({day:l,currentDate:s,date:i(T,k,l),isToday:x,isOutsideMonth:!0,select:n}))}return m},L=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>w({class:"text-center font-semibold text-muted-foreground py-1 m-0 mb-2 text-xs"},e)),Z=t=>o({class:"flex flex-auto flex-col w-full",onSet:["currentDate",()=>[o({class:"flex flex-col lg:border-b"},[o({class:"grid grid-cols-7"},L())]),o({class:"grid grid-cols-7 h-full"},J(t.current,t.today,t.select))]]}),q=t=>o({class:"justify-between flex items-center mb-4"},[p({class:"inline-flex items-end"},[O({class:"scroll-m-20 text-3xl font-bold tracking-tight md:pl-4"},"[[monthName]]"),D({class:"text-muted-foreground text-base ml-2 font-bold"},"[[current.year]]")]),o({class:"flex items-center space-x-2"},[d({variant:"icon",icon:f.chevron.single.left,click:t.previous}),d({variant:"icon",icon:f.chevron.single.right,click:t.next}),E({content:"Add Event",position:"left"},d({variant:"icon",class:"lg:mr-4",icon:f.circlePlus}))])]),K=t=>o({class:"flex flex-auto flex-col w-full space-y-1"},[q(t),Z({current:t.current,today:t.today,select:t.select})]),Q=t=>t?"bg-accent text-primary":"",U=(t,e)=>t===e,tt=(t,e)=>U(t,e)?"bg-primary text-primary-foreground":"",et=(t,e,n,r)=>{const a=tt(e,r);return a||(t?Q(!0):n?"text-muted-foreground opacity-50":"text-foreground")},nt=t=>{const e=t<12?"AM":"PM";let n=t%12;return n===0&&(n=12),`${n} ${e}`},rt=({hour:t,date:e})=>o({class:"relative h-16 flex flex-col px-2 py-1 hover:bg-muted/20"},[w({class:"text-xs text-muted-foreground"},nt(t)),o({class:"flex flex-col gap-1 mt-1"})]),at=({date:t,isToday:e,isOutsideMonth:n,currentDate:r,select:a})=>{const s=t.split("-")[2];return S({href:"/calendar/week/"+t,class:`
				flex flex-col hover:bg-muted/20
				focus:z-10 border-r
			`,click:()=>a(t)},[o({class:`p-2 text-sm font-semibold text-center border-b ${et(e,r,n,t)}`},s),o({class:"flex flex-col flex-1 overflow-y-auto"},Array.from({length:24},(u,c)=>rt({hour:c,date:t})))])},st=t=>{let e=t.getDay(),n=t.getDate()-e;return new Date(t.getFullYear(),t.getMonth(),n)},ot=t=>{const e=new Date(t.current.year,t.current.month,t.current.date),n=st(e),r=[];for(let a=0;a<7;a++){const s=new Date(n.getFullYear(),n.getMonth(),n.getDate()+a),u=s.getDate()===t.today.date&&s.getMonth()===t.today.month&&s.getFullYear()===t.today.year,c=i(s.getFullYear(),s.getMonth(),s.getDate()),h=s.getMonth()!==t.current.month;r.push(at({date:c,isToday:u,isOutsideMonth:h,currentDate:i(t.current.year,t.current.month,t.current.date),select:t.select}))}return o({class:"grid grid-cols-7 h-full"},r)},lt=t=>{let e=t.getDay(),n=t.getDate()-e;return new Date(t.getFullYear(),t.getMonth(),n)},ct=t=>{const e=new Date(t.current.year,t.current.month,t.current.date),n=lt(e),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+6);let a="";n.getMonth()===r.getMonth()?a=y.getMonthName(n.getMonth())+" "+n.getDate()+" - "+r.getDate():a=y.getMonthName(n.getMonth())+" "+n.getDate()+" - "+y.getMonthName(r.getMonth())+" "+r.getDate();const s=n.getFullYear();return o({class:"justify-between flex items-center mb-4"},[p({class:"inline-flex items-end"},[O({class:"scroll-m-20 text-3xl font-bold tracking-tight md:pl-4"},a),D({class:"text-muted-foreground text-base ml-2 font-bold"},String(s))]),o({class:"flex items-center space-x-2"},[d({variant:"icon",icon:f.chevron.single.left,click:t.previous}),d({variant:"icon",icon:f.chevron.single.right,click:t.next}),E({content:"Add Event",position:"left"},d({variant:"icon",class:"lg:mr-4",icon:f.circlePlus}))])])},ut=t=>o({class:"flex flex-auto flex-col w-full space-y-1"},[ct({current:t.current,previous:t.previous,next:t.next}),ot({current:t.current,today:t.today,select:t.select})]),mt=()=>new W({getSelectedDate(t){const e=this.selectedDate?new Date(H(this.selectedDate)):t;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},setData(){const t=new Date,e=this.getSelectedDate(t),n=e.getMonth(),r=e.getFullYear(),a=M(n,r);return new _({events:a,monthName:this.getMonthName(n),currentDate:`${r}-${n+1}-${e.getDate()}`,current:{date:e.getDate(),year:r,month:n},today:{date:t.getDate(),month:t.getMonth(),year:t.getFullYear()}})},getMonthName(t){return y.getMonthName(t)},goToPreviousMonth(){const t=this.data;let e=t.current.month,n=t.current.year;e===0?(e=11,n--):e--,this.setCurrentDate(e,n),this.data.events=M(e,n)},goToNextMonth(){const t=this.data;let e=t.current.month,n=t.current.year;e===11?(e=0,n++):e++,this.setCurrentDate(e,n),this.data.events=M(e,n)},setCurrentDate(t,e,n=null){const r=this.data;r.current.month=t,r.current.year=e,typeof n=="number"&&(r.current.date=g(n)),r.currentDate=`${e}-${g(t+1)}-${r.current.date}`,r.monthName=this.getMonthName(t)},selectDate(t){const e=new Date(t+"T00:00:00");this.setCurrentDate(e.getMonth(),e.getFullYear(),e.getDate()),typeof this.selectedCallBack=="function"&&this.selectedCallBack(this.data.currentDate)},update(){const t=this.route;t.date&&this.selectDate(t.date)},render(){return A([o({class:"px-4 flex flex-auto flex-col pt-[80px] sm:pt-2 md:pt-5 md:px-0"},[o({class:"flex flex-auto flex-col w-full h-full"},[F("view",t=>{switch(t){case"month":return K({current:this.data.current,today:this.data.today,select:e=>this.selectDate(e),next:()=>this.goToNextMonth(),previous:()=>this.goToPreviousMonth()});case"week":return ut({current:this.data.current,today:this.data.today,select:e=>this.selectDate(e),next:()=>this.goToNextMonth(),previous:()=>this.goToPreviousMonth()});default:return null}})])])])}});export{mt as CalendarPage,mt as default};
