import{ac as C,o as c,Y as t,g as w,G as l,a as p,c as m,s as i,n as b,l as S,X as g,f as I,an as T,F as P,b as h,t as L,z as D,a1 as A}from"./index-ChOLM_RV.js";import{I as $,c as y,L as x,T as u,D as a,a as O}from"./tooltip-CESEqMCU-OyesE2ig.js";import{c as z}from"./sidebar-menu-page-BVryQj2Z-868pA1kz.js";import"./signature-panel-rfv7cz7U-CGFQX5yh.js";import"./mobile-nav-wrapper-Dj67Pb8l-D8OjDX4O.js";const v=e=>new C({title:"Edit Client",icon:c.pencil.square,description:"What client would you like to edit?",size:"sm",type:"right",onSubmit:()=>app.notify({type:"success",title:"Client Edited",description:"The client has been edited.",icon:c.check})},[t({class:"flex flex-col lg:p-4 space-y-8"},[t({class:"flex flex-auto flex-col w-full gap-4"},[$({legend:"Client Details"},[new w({name:"name",label:"Name",description:"The name of the client."},[y({type:"text",placeholder:"Client name",required:!0})]),new w({name:"location",label:"Location",description:"The location of the client."},[y({type:"text",placeholder:"Location",required:!0})])])])])]).open(),d=({title:e,value:s,icon:o})=>x({class:"bg-card border border-border rounded-lg p-4 min-w-[250px] min-h-32 hover:bg-muted/50 transition-colors",margin:"m-0"},t({class:"flex flex-col space-y-2"},[t({class:"flex items-center space-x-2 text-muted-foreground"},[p(o,{class:"text-lg"}),m({class:"text-sm font-medium"},e)]),l({class:"text-2xl font-bold text-foreground"},s)])),f=i((e,s)=>t({class:"space-y-6"},[S({class:"flex flex-col space-y-2"},[m({class:"text-xl font-semibold"},e.title),e.description&&l({class:"text-sm text-muted-foreground"},e.description)]),...s])),j=i(({client:e})=>t({class:"flex items-center space-x-4 my-0"},[b({src:e.avatar,alt:e.name,fallbackText:e.name,size:"lg"}),t({class:"flex flex-col space-y-1"},[t({class:"flex items-baseline space-x-2"},[m({class:"text-2xl font-semibold text-foreground"},e.name),l({class:"text-sm text-muted-foreground"},e.code)]),t({class:"flex items-center space-x-2"},[l({class:"text-sm text-muted-foreground"},e.contactName),u({variant:e.status==="Active"?"primary":"secondary"},e.status)])])])),H=i(({client:e})=>t({class:"overflow-x-auto -mx-6 pl-6"},t({class:"flex space-x-4 pb-4 max-w-xs mr-6"},[d({title:"Payment Amount",value:`$${e.payment}`,icon:c.creditCard}),d({title:"Package",value:e.package,icon:c.cube}),d({title:"Next Due Date",value:e.nextDue,icon:c.calendar.default}),d({title:"Secret Passphrase",value:e.passphrase,icon:c.locked}),d({title:"Client Since",value:e.since,icon:c.clock})]))),q=({about:e})=>f({title:"About"},[l({class:"text-base text-muted-foreground max-w-[800px]"},e)]),M=i(({client:e})=>f({title:"Packages and Contract"},[x({class:"p-6",margin:"m-0",hover:!0},[t({class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},[t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Contract expiration in 8 months"),t({class:"flex items-center space-x-2"},[l({class:"font-medium text-foreground"},e.contractExpires),u({variant:"secondary"},e.contractStatus)])]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Billing"),l({class:"font-medium text-foreground"},`${e.package} (ID: ${e.contractId}), $${e.payment} monthly`)])]),t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Upgrades"),t({class:"flex flex-wrap gap-2"},e.addOns.map(s=>u({variant:"outline"},s)))]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Sales Agent"),l({class:"font-medium text-foreground"},e.salesAgent)])])])])])),N=e=>{switch(e){case"high":return c.chevron.up;case"low":return c.chevron.down;default:return c.check}},E=i(e=>x({class:"flex items-center justify-between p-4 cursor-pointer",margin:"m-2",hover:!0},[t({class:"flex items-center space-x-4"},[p(N(e.priority)),t({class:"flex flex-col"},[l({class:"font-medium"},e.subject),l({class:"text-sm text-muted-foreground"},e.owner)])]),u({variant:e.status==="Open"?"primary":"secondary"},e.status)])),V=i(({client:e})=>f({title:"Tickets"},[new g({cache:"tickets",key:"id",items:e.tickets,role:"list",rowItem:E})])),B=i(e=>x({class:"flex items-center justify-between cursor-pointer p-4",margin:"m-2",hover:!0},[t({class:"flex items-center space-x-4"},[p(c.document.default),t({class:"flex flex-col"},[l({class:"font-medium"},e.number),l({class:"text-sm text-muted-foreground"},e.date)])]),t({class:"flex items-center space-x-4"},[l({class:"font-medium text-foreground"},e.amount),u({variant:e.status==="Paid"?"secondary":"outline"},e.status)])])),F=i(()=>f({title:"Previous Invoices"},[new g({cache:"invoices",key:"id",items:[{id:1,number:"INV-1001",date:"May 1, 2024",amount:"$200.00",status:"Paid"},{id:2,number:"INV-1002",date:"Jun 1, 2024",amount:"$150.00",status:"Overdue"},{id:3,number:"INV-1003",date:"Jul 1, 2024",amount:"$175.00",status:"Paid"}],role:"list",rowItem:B})])),J=({client:e})=>t({class:"flex flex-auto flex-col space-y-12 mt-6"},[j({client:e}),H({client:e}),q(e),M({client:e}),V({client:e}),F()]),Y=()=>{const e=t({class:"space-y-4"},[a({width:"w-24",height:"h-6",class:"rounded-md"}),a({width:"w-full",height:"h-24",class:"rounded-md"})]),s=t({class:"space-y-4"},[a({width:"w-32",height:"h-6",class:"rounded-md"}),t({class:"pl-6 space-y-6"},[0,1].map(()=>t({class:"flex items-center space-x-4"},[a({width:"w-5",height:"h-5",class:"rounded-full"}),t({class:"space-y-1"},[a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/4",height:"h-3",class:"rounded-md"})])])))]),o=t({class:"space-y-4"},[a({width:"w-36",height:"h-6",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-2/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/2",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-6",class:"rounded-full"})]))])])]),n=t({class:"space-y-4"},[a({width:"w-20",height:"h-6",class:"rounded-md"}),t({class:"flex flex-wrap gap-2"},Array(5).fill().map(()=>a({width:"w-20",height:"h-6",class:"rounded-full"})))]),r=t({class:"space-y-4"},[a({width:"w-40",height:"h-6",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-1/4",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/5",height:"h-4",class:"rounded-md"})]))])])]),k=t({class:"flex-1 space-y-12 mt-6 px-6"},[e,s,o,n,r]);return t({class:"flex flex-auto p-0 pt-0 w-full"},[t({class:"flex flex-auto flex-col lg:flex-row"},[t({class:"flex flex-auto flex-col min-w-0"},[t({class:"flex flex-col w-full max-w-[1400px] p-6 mx-auto"},[k])]),t({class:"hidden 2xl:flex flex-none min-w-[420px] border-l"},[])])])},G=(e,s)=>e>s?!0:null,K=()=>t({class:"flex justify-between"},[h({type:"submit",variant:"icon",click:()=>console.log("Send email"),icon:c.airplane,class:"text-foreground hover:text-accent",onSet:["empty",(e,s)=>s.disabled=e]})]),U=I({state(){return{empty:!0,charCount:0,charLimit:this.charLimit??5e3,isOverLimit:!1}},submit(){console.log("message sent"),this.add(this.textarea.value,this),this.textarea.value="",this.state.charCount=0,this.state.isOverLimit=!1,this.state.empty=!0},checkSubmit(e){if(this.resizeTextarea(),e.keyCode===13)if(e.ctrlKey===!0){if(this.state.empty===!0||this.state.isOverLimit===!0){e.preventDefault(),e.stopPropagation(),app.notify({icon:c.warning,type:"warning",title:"Missing Message",description:"Please enter a message."});return}e.preventDefault(),e.stopPropagation(),this.submit()}else this.resizeTextarea()},resizeTextarea(){let s=48;if(this.textarea.value!==""){const o=this.textarea.scrollHeight;s=o>48?o:48}this.textarea.style="height:"+s+"px;"},render(){const e=this.state.charLimit,s=o=>{const n=o.target.value,r=this.state;r.charCount=n.length,r.isOverLimit=G(n.length,e),r.empty=n.length===0};return t({class:"fadeIn p-4 w-full lg:max-w-5xl m-auto"},[T({class:"relative flex border rounded-lg p-3 bg-surface",submit:()=>this.submit()},[P({class:"w-full border-none bg-transparent resize-none focus:outline-none focus:ring-0 text-sm text-foreground placeholder-muted-foreground",cache:"textarea",placeholder:this.placeholder,input:s,bind:this.bind,required:!0,keyup:o=>this.checkSubmit(o)}),t({class:"flex flex-col"},[K()])])])}}),W=e=>t({class:"flex justify-center mt-4"},[D({class:"text-xs text-muted-foreground bg-background p-2"},e.split("T")[0])]),X=i(e=>t({class:"flex space-x-3 px-6 py-4 hover:bg-muted/10 rounded"},[b({src:e.avatar,alt:e.user,fallbackText:e.user,size:"sm"}),t({class:"flex-1 space-y-1"},[l({class:"text-sm font-medium"},e.user),l({class:"text-sm text-muted-foreground"},e.text),e.attachments&&t({class:"flex space-x-2 mt-2"},[e.attachments.map(s=>L({src:s.src,alt:s.name,class:"w-16 h-16 rounded"}))])])])),_=i(({client:e})=>t({class:"flex flex-auto flex-col h-full space-y-4 p-0"},[S({class:"flex flex-col space-y-2 p-6"},[m({class:"text-lg text-muted-foreground"},"Conversation")]),t({class:"flex-1 overflow-y-auto space-y-2"},[new g({cache:"conversation",key:"id",items:e.conversation,role:"list",class:"flex flex-col",divider:{itemProperty:"date",layout:W,customCompare:(s,o)=>s.split("T")[0]!==o.split("T")[0]},rowItem:X})]),new U({placeholder:"Add a comment...",add:(s,{parent:o})=>{const n=new Date().toISOString(),r={id:Math.random()*1e3,date:n,user:"You",avatar:"https://github.com/shadcn.png",text:s};o.conversation.append(r)}})])),Q={class:"flex flex-auto flex-col w-full"},R=e=>t({class:"flex flex-row justify-between gap-4 py-4 lg:py-2"},[m({class:"text-2xl font-medium"},"Client Summary"),t({class:"flex flex-row space-x-2"},[t({class:"hidden lg:inline-flex"},[h({variant:"withIcon",class:"text-muted-foreground outline",icon:c.pencil.square,click:v},"Edit")]),t({class:"flex lg:hidden mr-4"},[O({content:"Edit",position:"left"},h({variant:"icon",class:"outline",icon:c.pencil.square,click:v}))])])]),le=()=>new z(Q,[A("loaded",(e,s,{context:o})=>{if(!e)return Y();const n=o.data.client;return n?t({class:"flex flex-auto p-0 pt-0 w-full"},[t({class:"flex flex-auto flex-col lg:flex-row"},[t({class:"flex flex-auto flex-col min-w-0"},[t({class:"flex flex-col w-full max-w-[1400px] p-6 mx-auto"},[R(),J({client:n})])]),t({class:"hidden 2xl:flex flex-none min-w-[420px] border-l"},[_({client:n})])])]):t({class:"text-center"},"Client not found.")})]);export{le as SummaryPage,le as default};
