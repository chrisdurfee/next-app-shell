import{ae as T,o as c,J as t,T as w,t as v,ad as x,_ as l,l as h,g as m,e as i,u as k,h as S,a0 as g,I,W as P,M as $,b as p,r as L,Z as A,N as D}from"./index-8TSoT022.js";import{L as O,c as y,T as u,V as a,D as N}from"./tooltip-Pwsjx1Gp-DImFfhk4.js";import{c as j}from"./sidebar-menu-page-BVryQj2Z-BjLZZC_r.js";import"./signature-panel-obojbki5-Bx31qCaZ.js";import"./mobile-nav-wrapper-Dj67Pb8l-BTf-EQIl.js";const b=e=>new T({title:"Edit Client",icon:c.pencil.square,description:"What client would you like to edit?",size:"sm",type:"right",onSubmit:()=>app.notify({type:"success",title:"Client Edited",description:"The client has been edited.",icon:c.check})},[t({class:"flex flex-col lg:p-4 space-y-8"},[t({class:"flex flex-auto flex-col w-full gap-4"},[O({legend:"Client Details"},[new w({name:"name",label:"Name",description:"The name of the client."},[y({type:"text",placeholder:"Client name",required:!0})]),new w({name:"location",label:"Location",description:"The location of the client."},[y({type:"text",placeholder:"Location",required:!0})])])])])]).open(),d=({title:e,value:s,icon:o,url:n=null})=>v({href:n},[x({class:"bg-card border border-border rounded-lg p-4 min-w-[250px] min-h-32 transition-colors",margin:"m-0",hover:!0},t({class:"flex flex-col space-y-2"},[t({class:"flex items-center space-x-2 text-muted-foreground"},[h(o,{class:"text-lg"}),m({class:"text-sm font-medium"},e)]),l({class:"text-2xl font-bold text-foreground"},s)]))]),f=i((e,s)=>t({class:"space-y-6"},[S({class:"flex flex-col space-y-2"},[m({class:"text-xl font-semibold"},e.title),e.description&&l({class:"text-sm text-muted-foreground"},e.description)]),...s])),z=i(({client:e})=>t({class:"flex items-center space-x-4 my-0"},[k({src:e.avatar,alt:e.name,fallbackText:e.name,size:"lg"}),t({class:"flex flex-col space-y-1"},[t({class:"flex items-baseline space-x-2"},[m({class:"text-2xl font-semibold text-foreground"},e.name),l({class:"text-sm text-muted-foreground"},e.code)]),t({class:"flex items-center space-x-2"},[l({class:"text-sm text-muted-foreground"},e.contactName),u({variant:e.status==="Active"?"primary":"secondary"},e.status)])])])),H=i(({client:e})=>t({class:"relative -mx-6 pl-6"},[t({class:"pointer-events-none absolute top-0 left-0 h-full w-6 bg-gradient-to-r from-background to-transparent"}),t({class:"flex flex-auto overflow-x-auto -ml-6 mr-0 px-6"},[t({class:"flex space-x-4 pb-4 max-w-xs"},[d({title:"Payment Amount",value:`$${e.payment}`,icon:c.creditCard,url:`clients/client/${e.id}/billing/payments`}),d({title:"Package",value:e.package,icon:c.cube,url:`clients/client/${e.id}/billing/orders`}),d({title:"Next Due Date",value:e.nextDue,icon:c.calendar.default,url:`clients/client/${e.id}/billing/payments`}),d({title:"Secret Passphrase",value:e.passphrase,icon:c.locked}),d({title:"Client Since",value:e.since,icon:c.clock})])]),t({class:"pointer-events-none absolute top-0 right-0 h-full w-16 bg-gradient-to-l from-background to-transparent"})])),M=({about:e})=>f({title:"About"},[l({class:"text-base text-muted-foreground max-w-[800px]"},e)]),q=i(({client:e})=>f({title:"Packages and Contract"},[x({class:"p-6",margin:"m-0",hover:!0},[t({class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},[t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Contract expiration in 8 months"),t({class:"flex items-center space-x-2"},[l({class:"font-medium text-foreground"},e.contractExpires),u({variant:"secondary"},e.contractStatus)])]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Billing"),l({class:"font-medium text-foreground"},`${e.package} (ID: ${e.contractId}), $${e.payment} monthly`)])]),t({class:"space-y-12"},[t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Upgrades"),t({class:"flex flex-wrap gap-2"},e.addOns&&e.addOns.map(s=>u({variant:"outline"},s)))]),t({class:"space-y-1"},[l({class:"text-sm text-muted-foreground"},"Sales Agent"),l({class:"font-medium text-foreground"},e.salesAgent||"Not Assigned")])])])])])),E=e=>{switch(e){case"high":return c.chevron.up;case"low":return c.chevron.down;default:return c.check}},V=i(e=>x({class:"flex items-center justify-between p-4 cursor-pointer",margin:"m-2",hover:!0},[t({class:"flex items-center space-x-4"},[h(E(e.priority)),t({class:"flex flex-col"},[l({class:"font-medium"},e.subject),l({class:"text-sm text-muted-foreground"},e.owner)])]),u({variant:e.status==="Open"?"primary":"secondary"},e.status)])),J=i(({client:e})=>f({title:"Tickets"},[new g({cache:"tickets",key:"id",items:e.tickets,role:"list",rowItem:V})])),B=e=>i(s=>v({href:`clients/client/${e.id}/billing/invoices/${s.id}`},[x({class:"flex items-center justify-between cursor-pointer p-4",margin:"m-2",hover:!0},[t({class:"flex items-center space-x-4"},[h(c.document.default),t({class:"flex flex-col"},[l({class:"font-medium"},s.number),l({class:"text-sm text-muted-foreground"},s.date)])]),t({class:"flex items-center space-x-4"},[l({class:"font-medium text-foreground"},s.amount),u({variant:s.status==="Paid"?"secondary":"outline"},s.status)])])])),W=i(({client:e})=>f({title:"Previous Invoices"},[new g({cache:"invoices",key:"id",items:[{id:1,number:"INV-1001",date:"May 1, 2024",amount:"$200.00",status:"Paid"},{id:2,number:"INV-1002",date:"Jun 1, 2024",amount:"$150.00",status:"Overdue"},{id:3,number:"INV-1003",date:"Jul 1, 2024",amount:"$175.00",status:"Paid"}],role:"list",rowItem:B(e)})])),K=({client:e})=>t({class:"flex flex-auto flex-col space-y-12 mt-6"},[z({client:e}),H({client:e}),M(e),q({client:e}),J({client:e}),W({client:e})]),U=()=>{const e=t({class:"space-y-4"},[a({width:"w-24",height:"h-6",class:"rounded-md"}),a({width:"w-full",height:"h-24",class:"rounded-md"})]),s=t({class:"space-y-4"},[a({width:"w-32",height:"h-6",class:"rounded-md"}),t({class:"pl-6 space-y-6"},[0,1].map(()=>t({class:"flex items-center space-x-4"},[a({width:"w-5",height:"h-5",class:"rounded-full"}),t({class:"space-y-1"},[a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/4",height:"h-3",class:"rounded-md"})])])))]),o=t({class:"space-y-4"},[a({width:"w-36",height:"h-6",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-2/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/2",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-6",class:"rounded-full"})]))])])]),n=t({class:"space-y-4"},[a({width:"w-20",height:"h-6",class:"rounded-md"}),t({class:"flex flex-wrap gap-2"},Array(5).fill().map(()=>a({width:"w-20",height:"h-6",class:"rounded-full"})))]),r=t({class:"space-y-4"},[a({width:"w-40",height:"h-6",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),t({class:"overflow-x-auto"},[t({class:"min-w-full divide-y divide-muted-200"},[t({class:"grid grid-cols-3 gap-4 pb-2"},Array(3).fill().map(()=>a({width:"w-full",height:"h-4",class:"rounded-md"}))),...[0,1].map(()=>t({class:"grid grid-cols-3 gap-4 py-3"},[a({width:"w-1/4",height:"h-4",class:"rounded-md"}),a({width:"w-1/3",height:"h-4",class:"rounded-md"}),a({width:"w-1/5",height:"h-4",class:"rounded-md"})]))])])]),C=t({class:"flex-1 space-y-12 mt-6 px-6"},[e,s,o,n,r]);return t({class:"flex flex-auto p-0 pt-0 w-full"},[t({class:"flex flex-auto flex-col lg:flex-row"},[t({class:"flex flex-auto flex-col min-w-0"},[t({class:"flex flex-col w-full max-w-[1400px] p-6 mx-auto"},[C])]),t({class:"hidden 2xl:flex flex-none min-w-[420px] border-l"},[])])])},Y=(e,s)=>e>s?!0:null,Z=()=>t({class:"flex justify-between"},[p({type:"submit",variant:"icon",click:()=>console.log("Send email"),icon:c.airplane,class:"text-foreground hover:text-accent",onSet:["empty",(e,s)=>s.disabled=e]})]),_=I({state(){return{empty:!0,charCount:0,charLimit:this.charLimit??5e3,isOverLimit:!1}},submit(){console.log("message sent"),this.add(this.textarea.value,this),this.textarea.value="",this.state.charCount=0,this.state.isOverLimit=!1,this.state.empty=!0},checkSubmit(e){if(this.resizeTextarea(),e.keyCode===13)if(e.ctrlKey===!0){if(this.state.empty===!0||this.state.isOverLimit===!0){e.preventDefault(),e.stopPropagation(),app.notify({icon:c.warning,type:"warning",title:"Missing Message",description:"Please enter a message."});return}e.preventDefault(),e.stopPropagation(),this.submit()}else this.resizeTextarea()},resizeTextarea(){let s=48;if(this.textarea.value!==""){const o=this.textarea.scrollHeight;s=o>48?o:48}this.textarea.style="height:"+s+"px;"},render(){const e=this.state.charLimit,s=o=>{const n=o.target.value,r=this.state;r.charCount=n.length,r.isOverLimit=Y(n.length,e),r.empty=n.length===0};return t({class:"fadeIn p-4 w-full lg:max-w-5xl m-auto"},[P({class:"relative flex border rounded-lg p-3 bg-surface",submit:()=>this.submit()},[$({class:"w-full border-none bg-transparent resize-none focus:outline-none focus:ring-0 text-sm text-foreground placeholder-muted-foreground",cache:"textarea",placeholder:this.placeholder,input:s,bind:this.bind,required:!0,keyup:o=>this.checkSubmit(o)}),t({class:"flex flex-col"},[Z()])])])}}),F=e=>t({class:"flex justify-center mt-4"},[A({class:"text-xs text-muted-foreground bg-background p-2"},e.split("T")[0])]),G=i(e=>t({class:"flex space-x-3 px-6 py-4 hover:bg-muted/50 rounded"},[k({src:e.avatar,alt:e.user,fallbackText:e.user,size:"sm"}),t({class:"flex-1 space-y-1"},[l({class:"text-sm font-medium"},e.user),l({class:"text-sm text-muted-foreground"},e.text),e.attachments&&t({class:"flex space-x-2 mt-2"},[e.attachments.map(s=>L({src:s.src,alt:s.name,class:"w-16 h-16 rounded"}))])])])),Q=i(({client:e})=>t({class:"flex flex-auto flex-col h-full space-y-4 p-0"},[S({class:"flex flex-col space-y-2 p-6"},[m({class:"text-lg text-muted-foreground"},"Conversation")]),t({class:"flex-1 overflow-y-auto space-y-2"},[new g({cache:"conversation",key:"id",items:e.conversation,role:"list",class:"flex flex-col",divider:{itemProperty:"date",layout:F,customCompare:(s,o)=>s.split("T")[0]!==o.split("T")[0]},rowItem:G})]),new _({placeholder:"Add a comment...",add:(s,{parent:o})=>{const n=new Date().toISOString(),r={id:Math.random()*1e3,date:n,user:"You",avatar:"https://github.com/shadcn.png",text:s};o.conversation.append(r)}})])),R={class:"flex flex-auto flex-col w-full"},X=e=>t({class:"flex flex-row justify-between gap-4 py-4 lg:py-2"},[m({class:"text-2xl font-medium"},"Client Summary"),t({class:"flex flex-row space-x-2"},[t({class:"hidden lg:inline-flex"},[p({variant:"withIcon",class:"text-muted-foreground outline",icon:c.pencil.square,click:b},"Edit")]),t({class:"flex lg:hidden mr-4"},[N({content:"Edit",position:"left"},p({variant:"icon",class:"outline",icon:c.pencil.square,click:b}))])])]),oe=()=>new j(R,[D("loaded",(e,s,{context:o})=>{if(!e)return U();const n=o.data.client;return n?t({class:"flex flex-auto p-0 pt-0 w-full"},[t({class:"flex flex-auto flex-col lg:flex-row"},[t({class:"flex flex-auto flex-col min-w-0"},[t({class:"flex flex-col w-full max-w-[1400px] md:p-6 mx-auto"},[X(),K({client:n})])]),t({class:"hidden 2xl:flex flex-none min-w-[420px] border-l"},[Q({client:n})])])]):t({class:"text-center"},"Client not found.")})]);export{oe as SummaryPage,oe as default};
